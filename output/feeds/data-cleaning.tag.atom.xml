<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Lo-Fi Python - data cleaning</title><link href="https://lofipython.com/" rel="alternate"></link><link href="https://lofipython.com/feeds/data-cleaning.tag.atom.xml" rel="self"></link><id>https://lofipython.com/</id><updated>2021-12-31T14:19:00-06:00</updated><entry><title>Phone Number Cleaning Regex + pandas Series Example</title><link href="https://lofipython.com/phone-number-cleaning-regex-pandas-series-example.html" rel="alternate"></link><published>2021-12-31T14:19:00-06:00</published><updated>2021-12-31T14:19:00-06:00</updated><author><name>pythonmarketer</name></author><id>tag:lofipython.com,2021-12-31:/phone-number-cleaning-regex-pandas-series-example.html</id><summary type="html">&lt;p&gt;This is a solution I worked out recently to strip phone numbers into a uniform format. To install &lt;a class="reference external" href="https://pandas.pydata.org/docs/getting_started/install.html"&gt;pandas with pip&lt;/a&gt;, enter in command prompt:&lt;/p&gt;
&lt;pre class="code python literal-block"&gt;
&lt;span class="n"&gt;python&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="n"&gt;pip&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;pandas&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;The pandas library has regex built in and it's pretty neat! Behold the power of pandas and a &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Regular_expression"&gt;regular expression …&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;This is a solution I worked out recently to strip phone numbers into a uniform format. To install &lt;a class="reference external" href="https://pandas.pydata.org/docs/getting_started/install.html"&gt;pandas with pip&lt;/a&gt;, enter in command prompt:&lt;/p&gt;
&lt;pre class="code python literal-block"&gt;
&lt;span class="n"&gt;python&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="n"&gt;pip&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;pandas&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;The pandas library has regex built in and it's pretty neat! Behold the power of pandas and a &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Regular_expression"&gt;regular expression&lt;/a&gt; to do trivial telephone tidying:&lt;/p&gt;
&lt;div class="wp-image-6382 figure"&gt;
&lt;img alt="strip phone formatting with Python" src="https://pythonmarketer.files.wordpress.com/2021/12/pandas-example-7-3.41.12-pm.png?w=561" style="width: 767px; height: 150px;" /&gt;
&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pandas&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;pd&lt;/span&gt;
&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Series&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;(010) 001-1010&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Phone&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dtype&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;str&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c1"&gt;# remove parentheses, hyphens and spaces with pandas + regex&lt;/span&gt;
&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pat&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;\(|\)|-| &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;repl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;regex&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c1"&gt;# resulting number: &amp;quot;0100011010&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Regex is cool.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Grasping the intricacies of what this code is doing feels elegant when you connect the dots.. or pipes. The replace is done via a pandas &lt;a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/series.html#api-series-str"&gt;str accessor&lt;/a&gt;. In the pat string, the parentheses are escaped with slashes and separated by pipes &amp;quot;|&amp;quot;. They act as an &lt;a class="reference external" href="https://realpython.com/python-or-operator/"&gt;or operator&lt;/a&gt;, succinctly chaining multiple characters together for matching and in this case replacing them with nothing. Pretty nifty. If you read the &lt;a class="reference external" href="https://pandas.pydata.org/docs/"&gt;pandas docs&lt;/a&gt;, you'll find regex is accessible in different parts of the API. Dive in, it's some of my favorite documentation to snoop. There is so much you can do with pandas. This example demonstrates how its flexible functions get the job done efficiently.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Further Reading:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.Series.html"&gt;pandas.Series documentation&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.Series.str.replace.html"&gt;pandas str.replace documentation&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://regex.info/blog/2006-09-15/247"&gt;Source of the famous “Now you have two problems” quote&lt;/a&gt;&lt;/p&gt;
</content><category term="coding, pandas, programming, python"></category><category term="data cleaning"></category><category term="regex"></category></entry></feed>