<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Lo-Fi Python - Facebook API</title><link href="https://lofipython.com/" rel="alternate"></link><link href="https://lofipython.com/feeds/facebook-api.tag.atom.xml" rel="self"></link><id>https://lofipython.com/</id><updated>2020-10-04T15:13:00-05:00</updated><entry><title>Post an Unsplash Photo to Facebook Pages with Python</title><link href="https://lofipython.com/post-a-photo-to-your-facebook-page-with-the-unsplash-facebook-apis.html" rel="alternate"></link><published>2020-10-04T15:13:00-05:00</published><updated>2020-10-04T15:13:00-05:00</updated><author><name>pythonmarketer</name></author><id>tag:lofipython.com,2020-10-04:/post-a-photo-to-your-facebook-page-with-the-unsplash-facebook-apis.html</id><summary type="html">&lt;p&gt;My goal was to automate posting positive photos and quotes to my Facebook page, &amp;quot;&lt;a class="reference external" href="https://www.facebook.com/positivedailythought"&gt;Positive Thoughts Daily&lt;/a&gt;&amp;quot;, with the Unsplash and Facebook APIs. Here's how I did it!&lt;/p&gt;
&lt;p&gt;This implementation relies on &lt;a class="reference external" href="https://unsplash.com/&amp;#64;erickbytes/likes"&gt;my own collection of photos on Unsplash&lt;/a&gt;. I will manually select which photos I like to get added â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;My goal was to automate posting positive photos and quotes to my Facebook page, &amp;quot;&lt;a class="reference external" href="https://www.facebook.com/positivedailythought"&gt;Positive Thoughts Daily&lt;/a&gt;&amp;quot;, with the Unsplash and Facebook APIs. Here's how I did it!&lt;/p&gt;
&lt;p&gt;This implementation relies on &lt;a class="reference external" href="https://unsplash.com/&amp;#64;erickbytes/likes"&gt;my own collection of photos on Unsplash&lt;/a&gt;. I will manually select which photos I like to get added to my collection. Then my app will take the new photos and post one a day for me.&lt;/p&gt;
&lt;blockquote&gt;
Side note: the free version of the Unsplash API is capped at 50 requests per week, which was enough for me.&lt;/blockquote&gt;
&lt;div class="section" id="setting-up-the-facebook-api"&gt;
&lt;h2&gt;Setting Up The Facebook API&lt;/h2&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Sign up for a Facebook &lt;a class="reference external" href="https://developers.facebook.com/"&gt;developer account&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Create a new Facebook app&lt;/li&gt;
&lt;li&gt;Add &amp;quot;page_manage_posts&amp;quot; and &amp;quot;pages_read_user_content&amp;quot; permissions to your app in the &lt;a class="reference external" href="https://developers.facebook.com/tools/explorer"&gt;Graph API Explorer&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Get a &amp;quot;short lived&amp;quot; user access token from the Graph API explorer (optional: fetch a &amp;quot;long lived&amp;quot; user access token, which lasts up to 60 days)&lt;/li&gt;
&lt;li&gt;Use your user access token to a fetch your page's access token&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;Optional: fetch long lived access token with curl&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="code python literal-block"&gt;
&lt;span class="n"&gt;curl&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;X&lt;/span&gt; &lt;span class="n"&gt;GET&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;https://graph.facebook.com/oauth/access_token?grant_type=fb_exchange_token&amp;amp; client_id={app-id}&amp;amp; client_secret={app-secret}&amp;amp; fb_exchange_token={short-lived-user-access-token}&amp;quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Fetch your Facebook page's access token&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="code python literal-block"&gt;
&lt;span class="n"&gt;curl&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;X&lt;/span&gt; &lt;span class="n"&gt;GET&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;https://graph.facebook.com/{your-user-id}/accounts?access_token={user-access-token}&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="section" id="setting-up-unsplash"&gt;
&lt;h2&gt;Setting up Unsplash&lt;/h2&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Sign up for an &lt;a class="reference external" href="https://unsplash.com/documentation"&gt;Unsplash developer account&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Install the python-unsplash library. In the terminal enter:&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class="literal-block"&gt;
python -m pip install python-unsplash
&lt;/pre&gt;
&lt;ol class="arabic simple" start="3"&gt;
&lt;li&gt;Decide what photo you want to post. This example fetches a random photo from my &lt;a class="reference external" href="https://unsplash.com/collections/66610223/positive-thoughts-daily"&gt;Unsplash collection&lt;/a&gt;. You can also fetch any photo at random, or pass in a query to get a certain type of photo.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;unsplash.api&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Api&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;unsplash.auth&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Auth&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;requests&lt;/span&gt;
&lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;Python-Unsplash library Github:&lt;/span&gt;
&lt;span class="sd"&gt;https://github.com/yakupadakli/python-unsplash&lt;/span&gt;
&lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;client_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;add_your_client_id&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;client_secret&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;add_your_client_secret&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;redirect_uri&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;add_your_redirect_uri&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;code&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;auth&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Auth&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;client_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;client_secret&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;redirect_uri&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;code&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;code&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;api&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Api&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;auth&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c1"&gt;# returns a python list containing a class&lt;/span&gt;
&lt;span class="n"&gt;image&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;api&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;photo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;collections&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;66610223&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# my collection id&lt;/span&gt;
&lt;span class="n"&gt;image_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;image&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;
&lt;span class="c1"&gt;# Use image_id to get random photo&amp;#39;s download link from a collection.&lt;/span&gt;
&lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;https://api.unsplash.com/photos/&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;image_id&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;/download?client_id=&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;client_id&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;image&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;download_link&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;image&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="posting-the-unsplash-image-to-facebook"&gt;
&lt;h2&gt;Posting the Unsplash Image to Facebook&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;Use download link and post to page with Facebook API.&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;page_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;add_page_id_from_about_section&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;https://graph.facebook.com/&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;page_id&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;/photos?access_token=&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;page_access_token&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;amp;url=&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;download_link&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;post&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;post_ids&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;post_ids&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Post Project Reflections&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;This was my first time working with the Facebook API. Honestly, it's a little crazy trying to balance all the token types in your head. There are about 5 different types of tokens that are used for different things! Ultimately I was able to figure out how to to post a photo. So there is a bit of a learning curve. It's a good challenge to build your API skills. The Unsplash API requires no &lt;a class="reference external" href="https://en.wikipedia.org/wiki/OAuth"&gt;Oauth&lt;/a&gt; tokens and is easier to pick up.&lt;/p&gt;
&lt;p&gt;My Facebook page posts are now triggered by page loads on this &lt;a class="reference external" href="https://positivethoughts.pythonanywhere.com/"&gt;website&lt;/a&gt;! I am using a &lt;a class="reference external" href="https://lofipython.com/essential-mysql-terminal-commands-and-connecting-to-mysql-with-flask-pandas-and-pythonanywhere/"&gt;MySQL database&lt;/a&gt; to track which images I post to make sure I don't duplicate any posts and to make sure I only post once every 24 hours. Ah, I love the smell of fresh automation in the morning. ðŸ˜€&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Supplementary Links&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://developers.facebook.com/docs/pages/getting-started"&gt;FB API &amp;quot;Getting Started&amp;quot;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://developers.facebook.com/tools/explorer"&gt;FB API &amp;quot;Explorer&amp;quot;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://developers.facebook.com/docs/permissions/reference"&gt;FB Permissions Reference&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://developers.facebook.com/docs/facebook-login/access-tokens/debugging-and-error-handling/"&gt;Debugging Tokens&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://developers.facebook.com/docs/pages/publishing/"&gt;FB API Publishing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://pythonmarketer.wordpress.com/2020/05/18/how-to-make-json-requests-with-python/"&gt;A Guide to Tackling APIs&lt;/a&gt;, written by me!&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</content><category term="APIs, coding, programming"></category><category term="Facebook API"></category><category term="python"></category><category term="social media"></category><category term="Unsplash"></category></entry></feed>