<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lo-Fi Python | Page 9</title>
    <link rel="shortcut icon" type="image/png" href="https://lofipython.com/favicon.png">
    <link rel="shortcut icon" type="image/x-icon" href="https://lofipython.com/favicon.ico">
    <link href="https://lofipython.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Lo-Fi Python Full Atom Feed" />
    <link href="https://lofipython.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Lo-Fi Python Full RSS Feed" />
    <link rel="stylesheet" href="https://lofipython.com/theme/css/main.css" type="text/css" />
    <link rel="stylesheet" href="https://lofipython.com/theme/css/pygments.css" type="text/css" />
    <meta name="generator" content="Pelican" />
    <meta name="description" content="" />
    <meta name="author" content="@erickbytes" />
</head>
<body>
    <header>
        <nav style="overflow: hidden;">
            <ul>
                <li><a href="https://lofipython.com/">Home</a></li>
                <li><a href="feeds/all.rss.xml">RSS</a></li>
                <li><a href="feeds/all.atom.xml">Atom</a></li>
                <li><a href="https://github.com/erickbytes/lofipython">Github</a></li>
                <li><a href="https://lofipython.com/contact">Need a Python Dev?</a></li>
            </ul>
        </nav>
        <div class="header_box" style="height: 50px">
        <h1><a href="https://lofipython.com/">
            <image src='images/python-powered-h-140x182.png' class="avatar" width="50px" /><span class="site_title">Lo-Fi Python</span>
            </a></h1></div>
        </div>
    </header>
    <div id="wrapper">
        <div id="content">            <h4 class="date">Aug 09, 2020</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://lofipython.com/join-algorithms.html" rel="bookmark" title="Permanent Link to &quot;Pondering Join Algorithms&quot;">Pondering Join Algorithms</a>
                </h2>

                
                

                <p>Truly enjoying this <a class="reference external" href="https://www.youtube.com/playlist?list=PLSE8ODhjZXjbohkNBWQs_otTrBTrjyohi">Intro to Database Systems course</a> from Carnegie Mellon University. Some really great breakdowns of common join algorithms in this lecture. Here are my notes.</p>
<blockquote>
<p><a class="reference external" href="https://www.youtube.com/watch?v=nUwT7PEQ49o&amp;list=PLSE8ODhjZXjbohkNBWQs_otTrBTrjyohi&amp;index=11">Lecture 11- Join Algorithms</a><strong>(CMU Databases Systems / Fall 2019)</strong></p>
<p>Prof. Andy Pavlo, Carnegie Mellon Database Group</p>
</blockquote>
<img alt="Join Algorithms" class="alignnone size-full wp-image-4118" src="https://pythonmarketer.files.wordpress.com/2020/08/join-algorithms.png" style="width: 747px; height: 404px;" />
<p><em>screenshot from lecture</em></p>
<p><strong>Table Positioning for a Join</strong></p>
<p>&quot;In general, your smaller table should be the &quot;left&quot; table when joining two tables.&quot;... Professor demonstrates better performance by making the smaller table the &quot;outer&quot; table in a join.</p>
<p><strong>Block Nested Loop Join [</strong><a class="reference external" href="https://dev.mysql.com/doc/refman/5.7/en/nested-loop-joins.html#:~:text=A%20Block%20Nested%2DLoop%20(BNL,inner%20loops%20must%20be%20read.&amp;text=The%20join_buffer_size%20system%20variable%20determines,used%20to%20process%20a%20query.">mysql example</a><strong>]</strong></p>
<ul class="simple">
<li>&quot;The brute force approach&quot;</li>
<li>If you have enough memory to hold a large table, a good option for joining.</li>
<li>Always pick the smaller table as the outer table.</li>
<li>Buffer as much of your outer table in memory as possible to reduce redundant I/O.</li>
<li>Loop over the inner table or use an index.</li>
</ul>
<p><strong>Index Nested Loop Join [</strong><a class="reference external" href="https://www.cs.carleton.edu/faculty/dmusicant/cs347f03/proj3/">CS Course definition</a><strong>]</strong></p>
<p>If indexes are available, or you could create an index to use for a join.</p>
<p><strong>Sort-Merge Join [</strong><a class="reference external" href="https://en.wikipedia.org/wiki/Sort-merge_join">wikipedia</a><strong>]</strong></p>
<p>Useful if one or both tables are sorted on a join key. Maximize sequential I/O.</p>
<img alt="Sort - Merge Join" class="alignnone size-full wp-image-4121" src="https://pythonmarketer.files.wordpress.com/2020/08/sort-merge-join-1.png" style="width: 1731px; height: 855px;" />
<p><em>screenshot from lecture</em></p>
<p><strong>Hash Join</strong></p>
<p>Best performance. For large datasets.</p>
<ol class="arabic simple">
<li>Phase #1 Build (Hash Table)</li>
<li>Phase #2 Probe</li>
</ol>
<p>Use a <a class="reference external" href="https://en.wikipedia.org/wiki/Bloom_filter">Bloom Filter</a> set operations for probe phase optimization.</p>
<ol class="arabic simple">
<li>insert a key</li>
<li>lookup a key</li>
</ol>
<!--  -->
<blockquote>
<p><strong>Additional Reading on Bloom Filters</strong></p>
<p><a class="reference external" href="https://onatm.dev/2020/08/10/let-s-implement-a-bloom-filter/">Let's implement a Bloom Filter</a></p>
<p><a class="reference external" href="https://gopiandcode.uk/logs/log-bloomfilters-debunked.html">Bloom Filters Debunked</a></p>
</blockquote>
<p><strong>Grace Hash Join</strong> [<a class="reference external" href="https://en.wikipedia.org/wiki/Hash_join#Grace_hash_join">wikipedia</a>]</p>
<ul class="simple">
<li>&quot;Do hash joins when things don't fit in memory.&quot;</li>
<li>Use a hash table for each table. Break the tables into buckets then do a nested loop join on each bucket. If the buckets do not fit in memory, use <a class="reference external" href="https://en.wikipedia.org/wiki/Recursive_partitioning#:~:text=Recursive%20partitioning%20is%20a%20statistical,on%20several%20dichotomous%20independent%20variables.">recursive partitioning</a>. Then everything fits in memory for the join.</li>
</ul>
<!--  -->
<blockquote>
<p>&quot;Split outer relation into partitions based on the hash key.&quot;</p>
<p>Prof. Andy Pavlo on Hash Join algorithm</p>
</blockquote>
<ul class="simple">
<li>Hashing is almost always better than sorting for operator execution.</li>
</ul>
<!--  -->
<blockquote>
<p>&quot;No join algorithm works well in all scenarios.&quot;</p>
<p>-Prof. Andy Pavlo</p>
</blockquote>
<p><a class="reference external" href="https://webmention.rocks/update/1">webmention</a></p>
<p><a class="reference external" href="https://webmention.rocks/update/1/part/2">webmention</a></p>

                <div class="clear"></div>

                <div class="info">
                    <a href="https://lofipython.com/join-algorithms.html">posted at 18:24</a>
                    &nbsp;&middot;&nbsp;<a href="https://lofipython.com/category/coding-data-databases-programming.html" rel="tag">coding, data, Databases, programming</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://lofipython.com/tag/algorithms.html" class="tags">algorithms</a>
                    &nbsp;<a href="https://lofipython.com/tag/computer-science.html" class="tags">computer science</a>
                    &nbsp;<a href="https://lofipython.com/tag/joins.html" class="tags">joins</a>
                    &nbsp;<a href="https://lofipython.com/tag/learning.html" class="tags">learning</a>
                    &nbsp;<a href="https://lofipython.com/tag/study.html" class="tags">study</a>
                    &nbsp;<a href="https://lofipython.com/tag/technology.html" class="tags">technology</a>
                </div>
            </article>            <h4 class="date">Jul 15, 2020</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://lofipython.com/benefits-of-go-and-threads-in-distributed-systems.html" rel="bookmark" title="Permanent Link to &quot;Benefits of Go and Threads in Distributed Systems&quot;">Benefits of Go and Threads in Distributed Systems</a>
                </h2>

                
                

                <p><strong>Preface</strong></p>
<p>These are my <a class="reference external" href="https://www.youtube.com/watch?v=gA4YXUJX7t8&amp;list=PLrw6a1wE39_tb2fErI4-WkMbsvGQk9_UB&amp;index=3&amp;t=0s">YouTube lecture</a> notes from MIT's Distributed Systems course. Thank you MIT and Professor Morris!</p>
<blockquote>
<p><a class="reference external" href="https://www.youtube.com/playlist?list=PLrw6a1wE39_tb2fErI4-WkMbsvGQk9_UB">MIT 6.824 Distributed Systems</a></p>
<p>Lecture 2: RPC and Threads - Feb 7, 2020</p>
<p>Prof. Robert Morris (Spring 2020)</p>
</blockquote>
<p><strong>Introduction</strong></p>
<p>Go is a popular programming language choice so my ears perked up when this lecture began. These notes were taken as the professor explains why he teaches his class in Go. He also mentioned he'd be able to teach it with Python or Java. He used C++ years ago.</p>
<p><strong>The beginning of this lecture was a great summary of:</strong></p>
<ul class="simple">
<li>key benefits of Golang</li>
<li>what threads are and why they're great</li>
<li>how Go, threads and async tie together</li>
</ul>
<p><strong>Go is Good for Distributed Systems</strong></p>
<p>Go is concurrency-friendly. With concurrent threads, you can effectively split a task such as making web requests to a server into many threads, completing them simultaneously.</p>
<p><strong>Golang's Convenient Features and Benefits</strong></p>
<ul class="simple">
<li>convenient <a class="reference external" href="https://golang.org/pkg/net/rpc/">Remote Procedure Call library</a> (<a class="reference external" href="https://en.wikipedia.org/wiki/Remote_procedure_call">RPC</a>) C++ lacks anything comparable?</li>
<li>&quot;Go is type-safe and memory-safe, unlike C++&quot;</li>
<li><a class="reference external" href="https://en.wikipedia.org/wiki/Garbage_collection_(computer_science)">garbage collection</a></li>
<li>&quot;the language is simple, unlike C++&quot;</li>
<li>&quot;good support for threads, <a class="reference external" href="https://en.wikipedia.org/wiki/Lock_(computer_science)">locking</a> and synchronization between threads&quot;</li>
<li>in Go, &quot;<a class="reference external" href="https://golang.org/doc/effective_go.html#goroutines">goroutines</a>&quot; are threads</li>
<li>professor's recommended reading to learn Go: <a class="reference external" href="https://golang.org/doc/effective_go.html">Effective Go</a></li>
</ul>
<p><strong>Why use threads?</strong></p>
<ul class="simple">
<li>I/O Concurrency</li>
<li>Multi-core <a class="reference external" href="https://en.wikipedia.org/wiki/Parallel_computing#:~:text=Parallel%20computers%20can%20be%20roughly,work%20on%20the%20same%20task.">Parallelism</a></li>
<li>Convenience, e.g. &quot;create 10 threads that sleep for a second and then do a little bit of work&quot;</li>
</ul>
<!--  -->
<blockquote>
<p>&quot;Threads are the main tool we're using to manage concurrency in programs.&quot;</p>
<p>-Prof. Robert Morris</p>
</blockquote>
<p><strong>Contrast With</strong><a class="reference external" href="https://en.wikipedia.org/wiki/Event-driven_programming#:~:text=In%20computer%20programming%2C%20event%2Ddriven,from%20other%20programs%20or%20threads.">Event-driven Programming</a><strong>(&quot;Asynchronomous&quot;)</strong></p>
<p>A single thread, single loop that waits for an event.</p>
<p><strong>Combining Threads and Event Driven Programming</strong></p>
<blockquote>
<p>&quot;Create one thread for each procedure call.&quot;... &quot;On each of the threads run a stripped down event driven loop. Sort of one event loop per core. That results in parallelism and I/O concurrency.&quot;</p>
<p>-Prof. Robert Morris</p>
</blockquote>
<p><strong>Postface: Concurrent Python Context</strong></p>
<p>I've rarely if ever used multiple threads in Python. Simply running a single threaded script seems sufficient for most of my tasks. Maybe I could speed up API requests by splitting into threads when making a few hundred thousand requests? Apparently I'm missing out on concurrent threading efficiency gains.</p>
<p>I once experimented with the <a class="reference external" href="https://docs.python.org/3.8/library/multiprocessing.html">multiprocessing</a> module's <a class="reference external" href="https://docs.python.org/3.8/library/multiprocessing.html#the-process-class">Process class</a>, which worked on Linux but not Windows for me. I ended up taking an simpler, single thread approach instead. I've also heard of using multiprocessing <a class="reference external" href="https://docs.python.org/3/library/multiprocessing.html#multiprocessing.pool.Pool">pool</a> objects. There's also the <a class="reference external" href="https://docs.python.org/3/library/asyncio.html">asyncio</a> library <a class="reference external" href="https://docs.python.org/3/library/concurrent.futures.html">concurrent.futures</a> modules to consider. The <a class="reference external" href="https://docs.python.org/3/library/concurrent.futures.html#processpoolexecutor-example">ProcessPoolExecutor</a> looks promising.</p>
<p>Python also has the <a class="reference external" href="https://docs.python.org/3/library/queue.html">queue module.</a> I haven't used it yet but at one point I watched a talk where <a class="reference external" href="https://www.youtube.com/watch?v=_GP9OpZPUYc">Raymond Hettinger</a> recommended queue as a good option if you want concurrency in Python.</p>
<p>It seems there are many options available in Python but it's not clear which tools should be deployed and when. And your chosen concurrency strategy may add extra complexity. Handle with care. Or consider learning Go if you want to use threads to scale your distributed system.</p>
<p><strong>Update: Python Concurrency Success</strong></p>
<p>I recently deployed the <a class="reference external" href="https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor">ThreadPoolExecutor</a> from the concurrent.futures module to efficiently move thousands of files to a new folder. So Python does have fairly accessible alternatives to concurrency. I guess I'll need to try Go sometime to compare!</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">from</span> <span class="nn">concurrent.futures</span> <span class="kn">import</span> <span class="n">ThreadPoolExecutor</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Move files concurrently from the current working directory to a new folder.</span>
<span class="sd">    This script is adapted from the Python ThreadPoolExecutor documentation:</span>
<span class="sd">    https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.Executor.shutdown</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">csvs</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span> <span class="k">if</span> <span class="s1">&#39;.csv&#39;</span> <span class="ow">in</span> <span class="n">f</span><span class="p">]</span>
    <span class="n">split_num</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">csvs</span><span class="p">)</span> <span class="o">/</span> <span class="mi">4</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">file_batches</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array_split</span><span class="p">(</span><span class="n">csvs</span><span class="p">,</span> <span class="n">split_num</span><span class="p">)</span>
    <span class="c1"># write to local folder named &quot;csvs&quot;</span>
    <span class="n">dst_folder</span> <span class="o">=</span> <span class="s2">&quot;/csvs&quot;</span>
    <span class="k">with</span> <span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">file_batches</span><span class="p">):</span>
            <span class="n">csv_A</span><span class="p">,</span> <span class="n">csv_B</span><span class="p">,</span> <span class="n">csv_C</span><span class="p">,</span> <span class="n">csv_D</span> <span class="o">=</span> <span class="n">files</span>
            <span class="n">e</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">,</span> <span class="n">csv_A</span><span class="p">,</span> <span class="n">dst_folder</span><span class="p">)</span>
            <span class="n">e</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">,</span> <span class="n">csv_B</span><span class="p">,</span> <span class="n">dst_folder</span><span class="p">)</span>
            <span class="n">e</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">,</span> <span class="n">csv_C</span><span class="p">,</span> <span class="n">dst_folder</span><span class="p">)</span>
            <span class="n">e</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">,</span> <span class="n">csv_D</span><span class="p">,</span> <span class="n">dst_folder</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div></td></tr></table></div>
<p><strong>Additional Reading</strong></p>
<p><a class="reference external" href="https://opensource.googleblog.com/2020/08/new-case-studies-about-googles-use-of-go.html?utm_source=feedburner&amp;utm_medium=feed&amp;utm_campaign=Feed%3A+GoogleOpenSourceBlog+%28Google+Open+Source+Blog%29">New Case Studies About Google's Use of Go</a></p>
<p><a class="reference external" href="https://go.dev/">go.dev</a></p>

                <div class="clear"></div>

                <div class="info">
                    <a href="https://lofipython.com/benefits-of-go-and-threads-in-distributed-systems.html">posted at 00:24</a>
                    &nbsp;&middot;&nbsp;<a href="https://lofipython.com/category/coding-concurrency-data-education-go-lectures-notes-programming.html" rel="tag">coding, concurrency, data, education, Go, lectures notes, programming</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://lofipython.com/tag/computers.html" class="tags">computers</a>
                    &nbsp;<a href="https://lofipython.com/tag/distributed-systems.html" class="tags">distributed systems</a>
                    &nbsp;<a href="https://lofipython.com/tag/golang.html" class="tags">golang</a>
                    &nbsp;<a href="https://lofipython.com/tag/mit.html" class="tags">MIT</a>
                    &nbsp;<a href="https://lofipython.com/tag/python.html" class="tags">python</a>
                    &nbsp;<a href="https://lofipython.com/tag/rpc.html" class="tags">rpc</a>
                </div>
            </article>            <h4 class="date">Jun 27, 2020</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://lofipython.com/choosing-database-storage-models-and-workloads-that-mesh.html" rel="bookmark" title="Permanent Link to &quot;Characterizing Database Workloads & Storage Models&quot;">Characterizing Database Workloads &amp; Storage Models</a>
                </h2>

                
                

                <p>Thank you <a class="reference external" href="https://db.cs.cmu.edu/">Carnegie Mellon Database Group</a> for putting this online! These are my notes from watching on YouTube.</p>
<blockquote>
<p>Carnegie Mellon Databases Storage II, Lecture 4</p>
<p>Prof. Andy Pavlo [<a class="reference external" href="https://www.youtube.com/watch?v=YWRYEXNy6IE&amp;list=PLSE8ODhjZXjbohkNBWQs_otTrBTrjyohi&amp;index=4">Watch on YouTube</a>]</p>
</blockquote>
<div class="section" id="the-problem-and-solution">
<h2>The Problem and Solution</h2>
<p>How should the DBMS represent the database in storage files on disk? Solve it by choosing the right <em>storage model</em> for your target <em>workload</em>. The right strategy varies if you are reading data, writing data and with how many joins you are performing.</p>
</div>
<div class="section" id="workload-characterization">
<h2>Workload Characterization</h2>
<p><strong>OLTP</strong> (<a class="reference external" href="https://en.wikipedia.org/wiki/Online_transaction_processing">Online Transaction Processing</a>): &quot;Simple queries with lots of writes.&quot;</p>
<p><strong>OLAP</strong> (<a class="reference external" href="https://en.wikipedia.org/wiki/Online_analytical_processing">Online Analytical Processing</a>): &quot;Read only queries. Lots of joins. Doing a lot of reads, but they're more complex.&quot;</p>
<p><strong>HTAP</strong> (<a class="reference external" href="https://en.wikipedia.org/wiki/Hybrid_transactional/analytical_processing">Hybrid Transactional Analytical Processing</a>): &quot;is trying to do both of them. You still want to ingest new data, but analyze it as it comes in. It's used for companies making decisions on the fly as people are browsing websites, like internet advertising companies.&quot;</p>
</div>
<div class="section" id="screenshot-2020-06-27-at-11-56-10-am">
<h2><img alt="Screenshot 2020-06-27 at 11.56.10 AM" class="alignnone size-full wp-image-3897" src="https://pythonmarketer.files.wordpress.com/2020/06/screenshot-2020-06-27-at-11.56.10-am.png" style="width: 1920px; height: 1080px;" /></h2>
</div>
<div class="section" id="storage-models">
<h2>Storage Models</h2>
<p>screenshots from the <a class="reference external" href="https://www.youtube.com/watch?v=YWRYEXNy6IE&amp;list=PLSE8ODhjZXjbohkNBWQs_otTrBTrjyohi&amp;index=4">lecture</a></p>
<img alt="n-ary model" class="alignnone size-full wp-image-3918" src="https://pythonmarketer.files.wordpress.com/2020/06/n-ary-model.png" style="width: 692px; height: 360px;" />
<p>N-ary used to be the dominant model until the '80s.</p>
<img alt="DSM model" class="alignnone size-full wp-image-3917" src="https://pythonmarketer.files.wordpress.com/2020/06/dsm-model-1.png" style="width: 938px; height: 396px;" />
<p><strong>Additional Reading:</strong> <a class="reference external" href="https://www.allthingsdistributed.com/2013/09/column-oriented-databases.html">All Things Distributed</a></p>
</div>
<div class="section" id="column-store-vs-row-store-rdbms">
<h2>Column Store Vs. Row Store RDBMS</h2>
<p><a class="reference external" href="https://dataschool.com/data-modeling-101/row-vs-column-oriented-databases/">Row-oriented DBMS</a><strong>(Row Store)</strong></p>
<ul class="simple">
<li>PostgreSQL, MySQL</li>
<li>Row Store = use OLTP</li>
</ul>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Column-oriented_DBMS">Column-oriented DBMS</a><strong>(Column Store)</strong></p>
<ul class="simple">
<li>Red Shift, BigQuery</li>
<li>Column Store = use OLAP</li>
</ul>
<p>If types are consistent, you can compress data into single column store.</p>
</div>

                <div class="clear"></div>

                <div class="info">
                    <a href="https://lofipython.com/choosing-database-storage-models-and-workloads-that-mesh.html">posted at 13:22</a>
                    &nbsp;&middot;&nbsp;<a href="https://lofipython.com/category/data-databases-education-performance.html" rel="tag">data, Databases, education, performance</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://lofipython.com/tag/carnegie-mellon.html" class="tags">Carnegie Mellon</a>
                    &nbsp;<a href="https://lofipython.com/tag/database-storage.html" class="tags">database storage</a>
                    &nbsp;<a href="https://lofipython.com/tag/learning.html" class="tags">learning</a>
                    &nbsp;<a href="https://lofipython.com/tag/lectures-notes.html" class="tags">lectures notes</a>
                </div>
            </article>            <h4 class="date">Jun 23, 2020</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://lofipython.com/my-favorite-free-educational-courses-and-talks-to-absorb.html" rel="bookmark" title="Permanent Link to &quot;Free Computer Science Courses and Talks To Absorb&quot;">Free Computer Science Courses and Talks To Absorb</a>
                </h2>

                
                

                <p>Below you'll find a balanced curriculum of juicy courses and videos that are available for free on the internet. I'll definitely be diving into most of these in the 2nd half of 2020. Stay curious!</p>
<div class="section" id="university-cs-courses-for-free">
<h2>University CS Courses For Free</h2>
<p><a class="reference external" href="https://www.youtube.com/playlist?list=PLhQjrBD2T382hIW-IsOVuXP1uMzEvmcE5">CS50's Web Programming with Python and JavaScript</a> | Harvard University</p>
<p><a class="reference external" href="https://archive.org/details/ucberkeley_webcast_gJJeUFyuvvg">CS 61-C Great Ideas in Computer Architecture (Machine Structures)</a>, Spring 2015 | UC Berkeley</p>
<p><a class="reference external" href="http://cs109.github.io/2015/">CS 109: Data Science</a>, 2015 | Harvard University</p>
<p><a class="reference external" href="https://uppsala.instructure.com/courses/28112">Mathematical Modeling of Football</a>, Fall 2020 | Uppsala Universitet</p>
<p><a class="reference external" href="https://www.youtube.com/watch?v=hry_qqXLej8&amp;list=PLN_mP1uWIrL6d_brjVN3qgDBxoYEAE-hG&amp;index=2">CS 162 - Operating Systems and Systems Programming</a>, Fall 2013 | UC Berkeley</p>
<p><a class="reference external" href="https://www.youtube.com/watch?v=oeYBdghaIjc&amp;list=PLSE8ODhjZXjbohkNBWQs_otTrBTrjyohi">15-445/645 Intro to Database Systems</a>, Fall 2019&nbsp;| Carnegie Mellon University</p>
<p><a class="reference external" href="https://www.youtube.com/watch?v=SdW5RKUboKc&amp;list=LLzDUyPGFtbvCCztZLs8-rfw&amp;index=25&amp;t=0s">15-721 Advanced Database Systems</a>, Spring 2020 | Carnegie Mellon University</p>
<p><a class="reference external" href="https://missing.csail.mit.edu/2020/">Missing Semester: Shell Tools &amp; Scripting</a>, Spring 2020 | MIT</p>
<p><a class="reference external" href="https://www.youtube.com/playlist?list=PLrw6a1wE39_tb2fErI4-WkMbsvGQk9_UB">6.824 Distributed Systems</a>, Spring 2020 | MIT</p>
<p><a class="reference external" href="https://www.youtube.com/playlist?list=PLOtl7M3yp-DX32N0fVIyvn7ipWKNGmwpp">CSE 373 - Analysis of Algorithms</a>, 2016 | Stony Brook University</p>
<p><a class="reference external" href="https://www.youtube.com/watch?v=9Btjg3I5-Wg">CS 4150 Algorithms</a>, Spring 2020 | University of Utah</p>
<p>CS 241 System Programming, Spring 2020 [<a class="reference external" href="https://github.com/illinois-cs241/coursebook">course wiki</a>] |&nbsp;University of Illinois</p>
<p><a class="reference external" href="https://www.cs.cornell.edu/courses/cs6120/2020fa/self-guided/">CS 6120: Advanced Compilers: The Self-Guided Online Course</a> | Cornell University</p>
</div>
<div class="section" id="intriguing-coursera-classes">
<h2>Intriguing Coursera Classes</h2>
<p><a class="reference external" href="https://www.coursera.org/learn/devops-culture-and-mindset#syllabus">DevOps Culture and Mindset</a> | UC-Davis</p>
<p><a class="reference external" href="https://www.coursera.org/specializations/data-structures-algorithms">Computer Science: Algorithms, Theory, and Machines</a> | Princeton University</p>
<p><a class="reference external" href="https://www.coursera.org/learn/excel-data-analysis-fundamentals?courseSlug=excel-data-analysis-fundamentals&amp;showOnboardingModal=check">Excel Fundamentals for Data Analysis</a> | Macquarie University</p>
<p><a class="reference external" href="https://www.coursera.org/projects/data-science-streamlit-python">Build a Data Science Web App with Streamlit and Python</a> | Guided Project [$10]</p>
</div>
<div class="section" id="programming-talks-tutorials">
<h2>Programming Talks &amp; Tutorials</h2>
<p>These programming talks piqued my interest, highly recommended.</p>
<p><strong>David Beazley | Built in Super Heroes [</strong><a class="reference external" href="https://www.youtube.com/watch?v=lyDLAutA88s&amp;index=4&amp;list=LLzDUyPGFtbvCCztZLs8-rfw">YouTube</a><strong>]</strong></p>
<p>Mr. Beazley shows how to use pure Python built-in functions to clean and analyze the City of Chicago's food inspection data. No pandas in this talk, behold the power of the Python standard library. Spoiler: Don't eat at O'hare airport. He also has a new course, available for free:</p>
<p><strong>David Beazley | Practical Python Programming&nbsp;[</strong><a class="reference external" href="https://dabeaz-course.github.io/practical-python/">Course</a><strong>]</strong></p>
<blockquote>
This is not a course for absolute beginners on how to program a computer. It is assumed that you already have programming experience in some other programming language or Python itself.</blockquote>
<p><strong>Sebastian Witowski | Modern Python Developer's Toolkit [</strong><a class="reference external" href="https://www.youtube.com/watch?v=WkUBx3g2QfQ">YouTube</a><strong>]</strong></p>
<p>An overview covering editing tools and setup from <a class="reference external" href="https://www.youtube.com/channel/UCMjMBMGt0WJQLeluw6qNJuA/videos">PyCon 2020</a>. Honing your development environment is crucial to being an efficent coder. This example uses VS Code. I use Atom as my primary text editor. The most recommended linters are usually pylint, flake8 or pyflakes.</p>
<p><strong>Jake VanderPlas | Reproducible Data Analysis in Jupyter [</strong><a class="reference external" href="https://www.youtube.com/watch?v=_ZEWDGpM-vM&amp;list=LLzDUyPGFtbvCCztZLs8-rfw&amp;index=138">YouTube</a><strong>]</strong></p>
<p>This 10 video series is a must-watch for aspiring data scientists and analysts if you use Python. Includes a git workflow demonstration, working in Jupyter Notebooks and many other essentials.</p>
<p><strong>Rich Hickey | Hammock Driven Development [</strong><a class="reference external" href="https://www.youtube.com/watch?v=f84n5oFoZBc">YouTube</a><strong>]</strong></p>
<p>Sometimes, the best thing we can do is step away from the keyboard. I really enjoy this speaker's communication style.</p>
<p><strong>Eric J. Ma | Demystifying Deep Learning for Data Scientists [</strong><a class="reference external" href="https://www.youtube.com/watch?v=gGu3pPC_fBM&amp;feature=youtu.be">YouTube</a><strong>]</strong></p>
<p>Tutorial-style Pythonmachine learning walk-through from PyCon 2020.</p>
<p><strong>Julie Michelman | Pandas, Pipelines, and Custom Transformers [</strong><a class="reference external" href="https://www.youtube.com/watch?v=BFaadIqWlAg&amp;index=6&amp;list=PLGVZCDnMOq0rxoq9Nx0B4tqtr891vaCn7">YouTube</a><strong>]</strong></p>
<p>This video shows a deep dive into the world of sci-kit learn and machine learning. PyCon and PyData videos usually include some cutting edge tech. Machine learning moves so fast there are always new tools surfacing. But certain libraries like sci-kit learn, TensorFlow, keras and PyTorch have been constant.</p>
<p><strong>Ville Tuuls | A Billion Rows per Second: Metaprogramming Python for Big Data [</strong><a class="reference external" href="https://www.youtube.com/watch?time_continue=1745&amp;v=rXj5nayS7Yg">YouTube</a><strong>]</strong></p>
<p>Make your data dense by tactically re-arranging into efficient structures and compiling it down to lower-level bytes. This details a successful Python / Postgres / Numba / Multicorn big data implementation.</p>
</div>
<div class="section" id="video-course-grab-bag">
<h2>Video &amp; Course Grab Bag</h2>
<p><strong>Discover the role of Python in space exploration [</strong><a class="reference external" href="https://docs.microsoft.com/en-us/learn/paths/introduction-python-space-exploration-nasa/">course</a><strong>]</strong></p>
<p>Microsoft and NASA made a free course about Python in space! 🤓</p>
<p><strong>Ted Nelson | Computers for Cynics [</strong><a class="reference external" href="https://www.youtube.com/watch?v=hZ3gmh-d9oI&amp;list=LLzDUyPGFtbvCCztZLs8-rfw&amp;index=137&amp;t=0s">YouTube</a><strong>]</strong></p>
<p>I find these videos to be an entertaining, thought-provoking take on software history. Recommended from Joe Armstrong, the creator of <a class="reference external" href="https://en.wikipedia.org/wiki/Erlang_(programming_language)">Erlang</a>.</p>
<p><strong>GNU Typist [</strong><a class="reference external" href="https://www.gnu.org/savannah-checkouts/gnu/gtypist/gtypist.html">Tutorial</a><strong>]</strong></p>
<p>You may be able to teach yourself to type more efficiently with this tutorial. I definitely need to do this. It's worth mentioning, per <a class="reference external" href="https://www.youtube.com/watch?v=f84n5oFoZBc">Rich Hickey:</a> with a proper design phase, you'll spend less time typing in the first place!</p>
<p><strong>Extra Credit: Python Wikipedia Library</strong></p>
<p>import wikipedia [<a class="reference external" href="https://github.com/goldsmith/Wikipedia">GitHub</a>]</p>
</div>
<div class="section" id="supplementary-resources">
<h2>Supplementary Resources</h2>
<ul class="simple">
<li><a class="reference external" href="https://teachyourselfcs.com/">teachyourselfcs.com</a></li>
<li><a class="reference external" href="https://github.com/chiphuyen/python-is-cool/blob/master/cool-python-tips.ipynb">Cool Python Tips Jupyter Notebook</a></li>
<li><a class="reference external" href="https://github.com/google/styleguide/blob/gh-pages/pyguide.md">Google's Python Style Guide</a></li>
<li><a class="reference external" href="https://github.com/gto76/python-cheatsheet">Python Cheat Sheet (Github)</a></li>
<li><a class="reference external" href="https://nocomplexity.com/machine-learning-resources/">Free and Open Machine Learning</a></li>
<li><a class="reference external" href="https://pages.dataiku.com/hubfs/PDF/Whitepaper/Importance_of_AutoML-for-Augmented-Analytics.pdf">AutoML and The Rise of the Citizen Data Scientist</a></li>
<li><a class="reference external" href="https://docs.google.com/spreadsheets/d/1GOO4s1NcxCR8a44F0XnsErz5rYDxNbHAHznu4pJMRkw/edit#gid=0">Data Engineering Study Guide</a></li>
<li><a class="reference external" href="https://github.com/jlevy/the-art-of-command-line">The Art of Command Line</a></li>
<li><a class="reference external" href="https://github.com/ossu/computer-science#advanced-cs">Open Source University</a></li>
<li><a class="reference external" href="https://drive.google.com/drive/u/0/folders/1ZS57_40tWuIB7tV4APVMmTZ-5PXDwX9w">Data Training Materials from the New York Times</a></li>
<li><a class="reference external" href="https://www.freecodecamp.org/">freecodecamp.org</a></li>
</ul>
</div>

                <div class="clear"></div>

                <div class="info">
                    <a href="https://lofipython.com/my-favorite-free-educational-courses-and-talks-to-absorb.html">posted at 03:35</a>
                    &nbsp;&middot;&nbsp;<a href="https://lofipython.com/category/coding-data-databases-education-programming-python-software.html" rel="tag">coding, data, Databases, education, programming, python, software</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://lofipython.com/tag/free-education.html" class="tags">free education</a>
                    &nbsp;<a href="https://lofipython.com/tag/harvard.html" class="tags">harvard</a>
                    &nbsp;<a href="https://lofipython.com/tag/knowledge.html" class="tags">knowledge</a>
                    &nbsp;<a href="https://lofipython.com/tag/learning.html" class="tags">learning</a>
                    &nbsp;<a href="https://lofipython.com/tag/mit.html" class="tags">MIT</a>
                    &nbsp;<a href="https://lofipython.com/tag/university.html" class="tags">university</a>
                </div>
            </article>            <h4 class="date">May 25, 2020</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://lofipython.com/essential-mysql-terminal-commands-and-connecting-to-mysql-with-flask-pandas-and-pythonanywhere.html" rel="bookmark" title="Permanent Link to &quot;Integrating MySQL with Flask, pandas and pythonanywhere&quot;">Integrating MySQL with Flask, pandas and pythonanywhere</a>
                </h2>

                
                

                <p>Sometimes a spark comes from seemingly nowhere. That's when you reach for your tools and create. After a series of successful experiments,
I decided this stack might be my quickest, best shot to get a functional website up and running in Python.
I was pleasantly surprised to make rapid progress over the span of a quarantine weekend.
Here are the steps to create a MySQL backed website with Flask.</p>
<p><strong>Hosting With pythonanywhere</strong></p>
<p><a class="reference external" href="https://www.pythonanywhere.com/">pythonanywhere</a> is a web hosting service like GoDaddy.
If you host your app with them, MySQL is the default database. Postgres integration is available at higher price tiers.</p>
<p><strong>To get your Flask app's database up and running you need to:</strong></p>
<ol class="arabic simple">
<li>Create your database (see the &quot;Databases&quot; tab in pythonanywhere)</li>
<li>Use the mysql terminal to create your tables</li>
<li>Use the mysql.connector API to connect to your table and execute SQL from your Flask app.</li>
</ol>
<div class="section" id="essential-mysql-terminal-commands">
<h2>Essential MySQL Terminal Commands</h2>
<p><strong>Show MySQL Version</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="k">VERSION</span><span class="p">();</span>
</pre></div></td></tr></table></div>
<p><strong>List tables in a database</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">SHOW</span><span class="w"> </span><span class="n">TABLES</span><span class="p">;</span>
</pre></div></td></tr></table></div>
<p><strong>Show All MySQL Variable Values</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">SHOW</span><span class="w"> </span><span class="n">VARIABLES</span><span class="p">;</span>
</pre></div></td></tr></table></div>
<p><strong>Creating a Table</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Marijuana</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">INT</span><span class="w"> </span><span class="n">AUTO_INCREMENT</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">350</span><span class="p">),</span><span class="w"> </span><span class="nb">date</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">350</span><span class="p">));</span>
</pre></div></td></tr></table></div>
<p><a class="reference external" href="https://www.sitepoint.com/use-json-data-fields-mysql-databases/">Create a Table with a JSON column</a></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Marijuana</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="w"> </span><span class="n">mediumint</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="w"> </span><span class="n">unsigned</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="n">AUTO_INCREMENT</span><span class="p">,</span>
<span class="w">  </span><span class="o">`</span><span class="n">store</span><span class="o">`</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="o">`</span><span class="n">details</span><span class="o">`</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="p">)</span>
<span class="p">)</span><span class="w"> </span><span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span><span class="p">;</span>
</pre></div></td></tr></table></div>
<p><strong>Add New Column and specify column to insert AFTER</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Marijuana</span>
<span class="k">ADD</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="nb">date</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="k">AFTER</span><span class="w"> </span><span class="n">other_column</span><span class="p">;</span>
</pre></div></td></tr></table></div>
<p><strong>Alter Datatype of a Column</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Marijuana</span><span class="w"> </span><span class="k">MODIFY</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="nb">INT</span><span class="w"> </span><span class="n">AUTO_INCREMENT</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">;</span>
</pre></div></td></tr></table></div>
<p><strong>Describe a Table</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">DESCRIBE</span><span class="w"> </span><span class="n">Marijuana</span><span class="p">;</span>
</pre></div></td></tr></table></div>
<p><strong>View All Records in a Table</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">Marijuana</span><span class="p">;</span>
</pre></div></td></tr></table></div>
<p><a class="reference external" href="https://www.mysqltutorial.org/mysql-basics/mysql-like/">Using LIKE in MySQL</a></p>
<p><strong>Select 10 Newest Records</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">Marijuana</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="k">DESC</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
</pre></div></td></tr></table></div>
<p><strong>&quot;Explaining&quot; A Query</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">EXPLAIN</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">Marijuana</span><span class="p">;</span>
</pre></div></td></tr></table></div>
<p><strong>Using &quot;ANALYZE TABLE&quot; to</strong><a class="reference external" href="https://dev.mysql.com/doc/refman/8.0/en/statement-optimization.html">optimize them</a><strong>is periodically recommended by MySQL:</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">ANALYZE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Marijuana</span><span class="p">;</span>
</pre></div></td></tr></table></div>
<figure></figure><div class="wp-image-3418 figure">
<img alt="mysql commands in shell" src="https://pythonmarketer.files.wordpress.com/2020/05/mysql_commands-1.png" />
</div>
</div>
<div class="section" id="installing-libraries-in-pythonanywhere">
<h2>Installing Libraries in PythonAnywhere</h2>
<p>You can use <a class="reference external" href="http://lofipython.com/how-to-python-pip-install-new-libraries/">pip</a> to install python libraries within the PythonAnywhere bash terminal. Go to the consoles tab and start a new bash terminal. Then to install a library, such as pandas:</p>
<pre class="literal-block">
python -m pip3.8 install --user pandas
</pre>
</div>
<div class="section" id="flask-app-with-mysql-connector-api-sql-and-pandas">
<h2>Flask app with <a class="reference external" href="https://dev.mysql.com/doc/connector-python/en/">mysql.connector API</a>, SQL and pandas</h2>
<p><strong>A Flask app making a mysql database connection with pandas:</strong></p>
<ol class="arabic simple">
<li>Creating an error log with logging.</li>
<li>Connecting to a mysql database hosted through <a class="reference external" href="https://flask.palletsprojects.com/en/1.1.x/quickstart/">Flask</a> and <a class="reference external" href="http://pythonanywhere.com">pythonanywhere</a></li>
<li>Then reading a table to a pandas <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html">dataframe</a></li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">mysql.connector</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">stream</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello_world</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Call database and return data from df. Then display homepage.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">email_df</span> <span class="o">=</span> <span class="n">get_database_table_as_dataframe</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">email_df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
        <span class="n">html_page</span> <span class="o">=</span> <span class="n">render_homepage</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">html_page</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Failed to connect to database.&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">render_homepage</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Note: you should use Flask&#39;s render_template to render HTML files.</span>
<span class="sd">    However, for example you can make a quick f-string HTML page that works in this code.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">html_page</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;html&gt;&lt;head&gt;&lt;link rel=&#39;stylesheet&#39; href=&quot;/static/styles/some_file.css&quot;&gt;&lt;link rel=&quot;shortcut icon&quot; type=&quot;image/x-icon&quot; href=&quot;static/favicon.ico&quot;&gt;</span>
<span class="s2">                    &lt;Title&gt;Dispensary Alerts&lt;/Title&gt;&lt;/head&gt;</span>
<span class="s2">                    &lt;body&gt;&lt;h2&gt;&lt;/h2&gt;</span>
<span class="s2">                    &lt;p&gt;Get alerts for your dope.&lt;/p&gt;&lt;br&gt;</span>
<span class="s2">                    &lt;h6&gt;&lt;b&gt;Sign Up&lt;/b&gt;&lt;/h6&gt;&lt;br&gt;</span>
<span class="s2">                    &lt;div class=&quot;form&quot;&gt;</span>
<span class="s2">                    &lt;form action=&quot;/add_signup_to_db&quot; method=&quot;post&quot; style=&quot;width:420px;text-align:center;display:block;&quot; &gt;</span>
<span class="s2">                    &lt;input type=&quot;text&quot; name=&quot;Signup Form&quot;&gt;</span>
<span class="s2">                    &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;</span>
<span class="s2">                    &lt;/form&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;</span>
<span class="s2">                    &lt;p&gt;&lt;b&gt;Current Time:&lt;/b&gt;</span>
<span class="s2">                    </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">())</span><span class="si">}</span><span class="s2"> &lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">html_page</span>


<span class="k">def</span> <span class="nf">get_database_table_as_dataframe</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Connect to a table named &#39;Emails&#39;. Returns pandas dataframe.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">connection</span> <span class="o">=</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="n">host</span><span class="o">=</span><span class="s2">&quot;username.mysql.pythonanywhere-services.com&quot;</span><span class="p">,</span>
            <span class="n">db</span><span class="o">=</span><span class="s2">&quot;username$DatabaseName&quot;</span><span class="p">,</span>
            <span class="n">user</span><span class="o">=</span><span class="s2">&quot;username&quot;</span><span class="p">,</span>
            <span class="n">password</span><span class="o">=</span><span class="s2">&quot;password&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">email_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">sql</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;SELECT * FROM Emails&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">con</span><span class="o">=</span><span class="n">connection</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">email_df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">email_df</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Failed to fetch dataframe from DB.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;Oops!&quot;</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/add_signup_to_db&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">add_signup_to_db</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Pass data as SQL parameters with mysql.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">connection</span> <span class="o">=</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="n">host</span><span class="o">=</span><span class="s2">&quot;username.mysql.pythonanywhere-services.com&quot;</span><span class="p">,</span>
            <span class="n">db</span><span class="o">=</span><span class="s2">&quot;username$DatabaseName&quot;</span><span class="p">,</span>
            <span class="n">user</span><span class="o">=</span><span class="s2">&quot;username&quot;</span><span class="p">,</span>
            <span class="n">password</span><span class="o">=</span><span class="s2">&quot;password&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="n">sql</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;INSERT INTO Emails (message, date) VALUES (</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">) &quot;&quot;&quot;</span>
        <span class="n">record_tuple</span> <span class="o">=</span> <span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="n">date</span><span class="p">)</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="n">record_tuple</span><span class="p">)</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">Error</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Failed to insert into MySQL table </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">error</span><span class="p">))</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error inserting records to DB.&quot;</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">connection</span><span class="o">.</span><span class="n">is_connected</span><span class="p">():</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="s2">&quot;MySQL connection is closed&quot;</span>
</pre></div></td></tr></table></div>
<p><strong>Iterative Development</strong></p>
<blockquote>
Below: making my website look less like a &quot;my first HTML&quot; website, experimenting with my app's message name and adding a sign-up form connected to the database.</blockquote>
<img alt="Screenshot_20200606-132252 (1)" class="alignnone size-full wp-image-3524" src="https://pythonmarketer.files.wordpress.com/2020/05/screenshot_20200606-132252-1-1.png" style="width: 344px; height: 566px;" />
<p><strong>Note: if you see this error when making a request in pythonanywhere:</strong></p>
<pre class="literal-block">
OSError: Tunnel connection failed: 403 Forbidden
</pre>
<p>It's likely because you are &quot;whitelisted&quot; on the free plan. Upgrading to the $5/month plan will fix it!</p>
<p><strong>Scoping The Full Stack</strong></p>
<p>I'm really enjoying this web development stack. Here are all of the tools and library choices for this website:</p>
<ul class="simple">
<li><a class="reference external" href="https://en.wikipedia.org/wiki/HTML">HTML</a></li>
<li><a class="reference external" href="https://www.taniarascia.com/overview-of-css-concepts/">CSS</a></li>
<li><a class="reference external" href="https://en.wikipedia.org/wiki/Web_framework">web framework</a>: Flask library</li>
<li>email: <a class="reference external" href="https://pythonhosted.org/Flask-Mail/">Flask-Mail</a> library(<a class="reference external" href="https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol">SMTP</a>)</li>
<li>API calls to external websites: <a class="reference external" href="https://requests.readthedocs.io/en/master/">requests</a> and json libraries</li>
<li>data handling: MySQL database, mysql.connector API, <a class="reference external" href="https://lofipython.com/pandas-pythons-excel-powerhouse/">pandas library</a></li>
<li>file system: <a class="reference external" href="https://docs.python.org/3/library/logging.html">logging</a>, os and sys libraries</li>
<li>(may add) payment processing: <a class="reference external" href="https://github.com/braintree/braintree_python">Braintree Library</a></li>
<li>web hosting: pythonanywhere</li>
</ul>
<p><strong>Finding Your Flask Groove</strong></p>
<p>Flask is a little scary at first, but reasonable once you get a grasp of the basic syntax. Using the logging module to establish access, error
and server log feeds was a big step to finding my Python traceback fixing groove. It's a work in progress.</p>
<p><strong>Recapping My Python Web Development and Database Experiences</strong></p>
<p>I previously created a <a class="reference external" href="http://tameimpala.pythonanywhere.com/tameimpala">website</a> with <a class="reference external" href="https://lofipython.com/getting-started-with-web2py/">web2py</a>,
another Python web framework like Flask and Django. I think it was a decent choice for me at that point in my Python journey. Back then,
I connected a MongoDB back-end to web2py. I randomly picked Mongo out of the DB hat and it worked well enough.</p>
<blockquote>
<p><strong>My Python Web Development and Database Tools</strong></p>
<p><strong>App #1</strong>          web2py + MongoDB</p>
<p><strong>App #2</strong>           Flask + MySQL</p>
<p><strong>Future App?</strong>   py4web + pyDAL + PostgreSQL</p>
<p><strong>Future App?</strong>  tornado + streamlit (or) Flask + Dash (+ SQLite)</p>
</blockquote>
<p>Of these two diverse Python stacks, I favor MySQL and Flask. But I learned a lot from watching web2py's tutorial videos and it's less intimidating for beginners. And I barely scratched the surface of web2py's &quot;pure Python&quot; <a class="reference external" href="https://github.com/web2py/pydal">pyDAL (Database Abstraction Layer)</a>, which seems pretty dope.</p>
<p>web2py's <a class="reference external" href="https://www.youtube.com/watch?v=hcYUgNWvPtw">creator</a> has a new framework in progress called <a class="reference external" href="https://github.com/web2py/py4web">py4web</a>.
It has the same <a class="reference external" href="http://www.web2py.com/books/default/chapter/29/06/the-database-abstraction-layer">DAL</a> and inherits many other web2py qualities.
Definitely looking forward to exploring the DAL on my first py4web website. I'll likely use it to connect to PostgreSQL or SQLite.
Maybe I'll <a class="reference external" href="https://github.com/web2py/pydal">install pyDAL with pip</a> in the meantime.</p>
<p><strong>Final Thoughts</strong></p>
<p>Both of my websites are hosted with pythonanywhere, which gives you a text editor and <a class="reference external" href="https://en.wikipedia.org/wiki/Bash_(Unix_shell)">bash</a> terminal
to run your scripts in a shell environment. I'm so pleased with all of these tools. They fit together smoothly and made creating my website a fun experience.</p>
</div>

                <div class="clear"></div>

                <div class="info">
                    <a href="https://lofipython.com/essential-mysql-terminal-commands-and-connecting-to-mysql-with-flask-pandas-and-pythonanywhere.html">posted at 21:48</a>
                    &nbsp;&middot;&nbsp;<a href="https://lofipython.com/category/data-databases-odbc-pandas-programming-sql-web-development-web2py.html" rel="tag">data, Databases, ODBC, pandas, programming, SQL, web development, web2py</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://lofipython.com/tag/flask.html" class="tags">flask</a>
                    &nbsp;<a href="https://lofipython.com/tag/mysql.html" class="tags">mysql</a>
                    &nbsp;<a href="https://lofipython.com/tag/py4web.html" class="tags">py4web</a>
                    &nbsp;<a href="https://lofipython.com/tag/pydal.html" class="tags">pyDAL</a>
                    &nbsp;<a href="https://lofipython.com/tag/python.html" class="tags">python</a>
                </div>
            </article>            <h4 class="date">May 18, 2020</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://lofipython.com/how-to-make-json-requests-with-python.html" rel="bookmark" title="Permanent Link to &quot;A Guide To Making HTTP Requests To APIs With JSON & Python&quot;">A Guide To Making HTTP Requests To APIs With JSON &amp; Python</a>
                </h2>

                
                

                <p>This contains all of my best API-related knowledge picked up since learning how to use them. All APIs have their own style, quirks and unique requirements. This post explains general terminology, tips and examples if you're looking to tackle your first API.</p>
<p><strong>Here's what is covered:</strong></p>
<ol class="arabic simple">
<li>API &amp; HTTP Lingo You Should Know</li>
<li>Testing and Exporting Python Request Code from Postman (Optional)</li>
<li>Formatting Your Request</li>
<li>Example GET and POST Requests</li>
<li>&quot;Gotchyas&quot; To Avoid</li>
<li>Sidebar: requests.Session()</li>
<li>Dig deeper into requests by raising your HTTPConnection.debuglevel</li>
</ol>
<!--  -->
<blockquote>
<strong>Terminology Clarification</strong>: I will refer to &quot;items&quot; or &quot;data&quot; throughout this post. This could be substituted for contacts or whatever data you are looking for. For example, you might be fetching a page of contacts from your CRM. Or fetching your tweets from Twitter's API. Or searching the Google location API, you might look up an address and return geo-location coordinates.</blockquote>
<div class="section" id="api-http-lingo-you-should-know">
<h2>API &amp; HTTP Lingo You Should Know</h2>
<p><strong>Hypertext Transfer Protocol (HTTP)</strong></p>
<p>Per <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTTP">Mozilla</a>, &quot;Hypertext Transfer Protocol (HTTP) is an application-layer protocol for transmitting hypermedia documents, such as HTML. It was designed for communication between web browsers and web servers, but it can also be used for other purposes. HTTP follows a classical <a class="reference external" href="https://en.wikipedia.org/wiki/Client%E2%80%93server_model">client-server model</a>, with a client opening a connection to make a request, then waiting until it receives a response.&quot;</p>
<blockquote>
HTTP: you = client. API = way to communicate with server</blockquote>
<p><strong>Application Programming Interface (API)</strong></p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Application_programming_interface">Per Wikipedia</a>, the purpose of an API is to simplify &quot;programming by <a class="reference external" href="https://en.wikipedia.org/wiki/Abstraction_(software_engineering)">abstracting</a> the underlying implementation and only exposing objects or actions the developer needs.&quot;</p>
<p><strong>Representational State Transfer (REST)</strong></p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> is an architectural style of web APIs. It is the dominant architecture that many APIs use. Simple Object Access Protocol (<a class="reference external" href="https://smartbear.com/blog/test-and-monitor/soap-vs-rest-whats-the-difference/">SOAP</a>) is another style I've heard of, but it seems less common nowadays.</p>
<p>A REST API is built for interoperability and has properties like: &quot;simplicity of a uniform interface&quot; and &quot;visibility of communication between components by service agents.&quot; [<a class="reference external" href="https://en.wikipedia.org/wiki/Representational_state_transfer">Wikipedia</a>] If an API follows REST, it has many good principles baked in.</p>
<p><strong>GET, POST and PATCH</strong></p>
<p>These are three common types of request methods.</p>
<ul class="simple">
<li><cite>GET</cite>: Read data returned, such as all of your tweets in <a class="reference external" href="https://developer.twitter.com/en/docs">the Twitter API</a>.</li>
<li><cite>POST</cite>: Create a new item, like writing a new tweet. Can also update existing data. Tweets aren't editable though!</li>
<li><cite>PATCH</cite>: Similar to <cite>POST</cite>, this is typically used for updating data.</li>
</ul>
<p><strong>URL or &quot;Endpoint&quot;</strong></p>
<p>This is the website target to send your request. Some APIs have multiple endpoints for different functionality.</p>
<p><strong>URL Parameters</strong></p>
<p>Values you pass to tell the API what you want. They are defined by the API specifications, which are usually well documented. In Python's requests library, they may be passed as <a class="reference external" href="https://treyhunner.com/2018/04/keyword-arguments-in-python/">keyword arguments</a>. Sometimes they are passable directly within the endpoint url string.</p>
<p><strong>Body or &quot;Payload&quot;</strong></p>
<p>To make a request, you send a payload to the url. Often this is a JSON string with the API's URL parameters and values, AKA the request body. If the <a class="reference external" href="https://jira.readthedocs.io/">API is written specifically for Python</a>, it might accept an actual Python dictionary.</p>
<p><strong>Javascript Object Notation (JSON)</strong></p>
<p><a class="reference external" href="https://www.youtube.com/watch?v=KnAyziNnuI0">JSON</a> is the data interchange standard for all languages. Usually it is the default way to pass data into and receive data from an API. If making a POST, you can check your json object is formatted correctly by using a <a class="reference external" href="https://jslint.com/">json linter</a>. Or try Python's <a class="reference external" href="https://docs.python.org/3/library/json.html#module-json.tool">json.tool</a>! You can also pretty print your JSON or python dictionary with the <a class="reference external" href="https://docs.python.org/3/library/pprint.html">pprint</a> module. If you're using json.dumps remember it has <a class="reference external" href="https://docs.python.org/3/library/json.html">pretty printing accessible by keyword arguments</a>! These features are accessible in the standard library. Isn't Python great? See also: <a class="reference external" href="https://www.blog.pythonlibrary.org/2020/09/15/python-101-an-intro-to-working-with-json/">Python 101 - An Intro to Working with JSON</a></p>
<p><strong>Pages</strong></p>
<p>API data is commonly returned in multiple pages when there is a lot of data returned. Each page can be accessed one request at a time. Sometimes you can specify how many items you want on a page. But there is usually a maximum items per page limit like 100.</p>
<p><strong>Status Code</strong></p>
<p>Each request usually gives you a <a class="reference external" href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes">numeric code corresponding to happened</a> when the server tried to handle your request. There is also usually a message returned.</p>
<p><strong>Headers</strong></p>
<p>These usually contain website cookies and authorization info. They also may tell the API what kind of data you want back. JSON and XML are the two most common types of data to return. You can specify the return format in the <strong>content-type</strong> headers.</p>
<blockquote>
If you need to parse an XML response, check out Python's stock <a class="reference external" href="https://docs.python.org/3.8/library/xml.etree.elementtree.html">ElementTree API</a>. I've only seen a few APIs using XML responses, such as the <a class="reference external" href="https://www.usps.com/business/web-tools-apis/">USPS Address Validation API</a>.</blockquote>
<p><strong>Authorization</strong></p>
<p>Authorization varies widely. This is the level of identification you need to pass to the API to make a request. Public APIs might require none. Some just need a username and password. Others use the <a class="reference external" href="https://en.wikipedia.org/wiki/OAuth">Oauth standard</a>, which is a system involving credentials and tokens for extra security.</p>
<blockquote>
<p><strong>Authorization Scheme Example [</strong><a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Authorization">Mozilla</a><strong>]</strong></p>
<p>Authorization: &lt;auth-scheme&gt; &lt;authorisation-parameters&gt;</p>
</blockquote>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="c1"># headers python dict example</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;basic </span><span class="si">{</span><span class="n">token</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}</span>
</pre></div></td></tr></table></div>
</div>
<div class="section" id="creating-the-request-json">
<h2>Creating the Request JSON</h2>
<p>I recommend using <a class="reference external" href="https://www.postman.com/">Postman</a> in most cases, depending on the complexity of the API. If the JSON syntax is straightforward, you can format your data as a python dictionary, then convert it to a JSON object with <strong>json.dumps</strong> from the standard library's <a class="reference external" href="https://docs.python.org/3/library/json.html#json.dumps">json module</a>. But JSON can be tricky sometimes. You may also need to pass a dictionary of HTTP headers.</p>
<p>Some APIs have &quot;Postman Collections&quot;, a set of Python (or any language) script templates for the API. In those cases, it might make sense to use those resources.</p>
<blockquote>
<p><strong>Path One: Make HTTP request with json &amp; requests libraries</strong></p>
<p>Format Python dict with <strong>json.dumps</strong> from the standard library's <a class="reference external" href="https://docs.python.org/3/library/json.html#json.dumps">json module</a>. Infer API requirements from documentation. Use requests for HTTP.</p>
<p><strong>Path Two: Make HTTP request with Postman &amp; requests library</strong></p>
<p>Use Postman to generate the JSON payload. Plug headers and payload into requests. Use requests library for HTTP.</p>
</blockquote>
<p>Postman has a friendly interface for plugging in all your pieces and tinkering with your request body until it works. Make it easier on yourself and use Postman, especially if there are collections. An alternative is to troubleshoot in Python if you are confident in your grasp of the API. I use both options depending on my familiarity with the API at hand.</p>
</div>
<div class="section" id="formatting-your-request">
<h2>Formatting Your Request</h2>
<ol class="arabic simple">
<li>Once you have the request working, you may <a class="reference external" href="https://learning.postman.com/docs/postman/sending-api-requests/generate-code-snippets/">export your Postman request to almost any language</a>. For Python, you can sometimes export to the requests, http.client or urllib libraries. Hit the &quot;code&quot; button in Postman and then copy your code.</li>
<li>Paste your Postman headers, payload and url into your existing code.</li>
<li>You may want to use a dict or <a class="reference external" href="https://www.blog.pythonlibrary.org/2020/04/07/python-101-working-with-strings/">string formatting</a> to pass values to your request parameters or url.</li>
<li>If the API uses a token or other form of authorization that needs to be refreshed intermittently, I usually have a function that returns a token. <strong>token = fetch_token()</strong> Then put the token in the headers dict. <strong>{&quot;Authorization&quot;: f&quot;basic {token}&quot;}</strong> Finally pass your headers and payload to your <strong>requests.get</strong>, <strong>requests.post</strong>, or <strong>requests.request</strong> function along with the endpoint url. You're now ready to test the request.</li>
</ol>
<p>If you choose not to use Postman, you can use the json library. See the use of <strong>json.dumps()</strong> to convert a dictionary to a JSON object in example #2 below.</p>
</div>
<div class="section" id="python-installation">
<h2>Python Installation</h2>
<p>You can install <strong>requests</strong> with <a class="reference external" href="https://lofipython.com/how-to-python-pip-install-new-libraries/">pip</a>. Alternatively, <strong>http.client</strong> is included within the Python standard library. If you want to convert HTTP response data to a dataframe or csv, install <strong>pandas</strong>.</p>
<pre class="literal-block">
python -m pip install requests
python -m pip install pandas
</pre>
</div>
<div class="section" id="example-1-get-the-geolocation-details-of-any-public-location-with-the-google-api">
<h2>Example #1: <strong>GET</strong> the geolocation details of any public location with the Google API</h2>
<p>This was modified from another example of <a class="reference external" href="https://www.geeksforgeeks.org/get-post-requests-using-python/">Google's Geolocation API</a>. To use this, you need to
<a class="reference external" href="https://developers.google.com/maps/documentation/geolocation/intro">create a developer account with Google</a> and paste your API keys below.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>


<span class="c1"># Find the best double-cheeseburger + fries $7 can buy.</span>
<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;Add_Google_API_Key_Here&quot;</span><span class="p">,</span> <span class="s2">&quot;address&quot;</span><span class="p">:</span> <span class="s2">&quot;Redhot Ranch&quot;</span><span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://maps.googleapis.com/maps/api/geocode/json&quot;</span>
<span class="c1"># Optional: set a 5 second timeout for the http request.</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="c1"># Extract the latitude, longitude and formatted address of the first matching location.</span>
<span class="n">latitude</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;results&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;location&quot;</span><span class="p">][</span><span class="s2">&quot;lat&quot;</span><span class="p">]</span>
<span class="n">longitude</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;results&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;location&quot;</span><span class="p">][</span><span class="s2">&quot;lng&quot;</span><span class="p">]</span>
<span class="n">formatted_address</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;results&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;formatted_address&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">longitude</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">latitude</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">formatted_address</span><span class="p">)</span>

<span class="c1"># Optional: convert response into a dataframe with pandas.</span>
<span class="c1"># import pandas as pd</span>
<span class="c1"># location_df = pd.json_normalize(data[&#39;results&#39;])</span>
<span class="c1"># location_df.to_csv(&#39;Locations.csv&#39;)</span>
</pre></div></td></tr></table></div>
<p><strong>Above you can see:</strong></p>
<ul class="simple">
<li>requests makes it easy to see the server's text response also with <strong>response.text</strong></li>
<li>requests also makes JSON encoding easy with <strong>response.json()</strong></li>
<li><strong>pd.json_normalize()</strong> is convenient to convert the response dictionary to a dataframe.</li>
</ul>
</div>
<div class="section" id="example-2-encode-a-python-dictionary-to-json-string-and-post-to-a-hypothetical-api">
<h2>Example #2: Encode a Python dictionary to json string and <strong>POST</strong> to a hypothetical API</h2>
<ol class="arabic simple">
<li>Create a dictionary with request body data and pretty inspect it with pprint.</li>
<li>Encode the json string with <strong>json.dumps</strong> from the standard library's <a class="reference external" href="https://docs.python.org/3/library/json.html#json.dumps">json module</a>.</li>
<li><strong>POST</strong> the encoded JSON to the endpoint url with requests.</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">pprint</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>


<span class="k">def</span> <span class="nf">dict_to_json_data</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create request body with fictional contact details.&quot;&quot;&quot;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;first_name&quot;</span><span class="p">:</span> <span class="s2">&quot;P&quot;</span><span class="p">,</span>
        <span class="s2">&quot;last_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Sherman&quot;</span><span class="p">,</span>
        <span class="s2">&quot;address&quot;</span><span class="p">:</span> <span class="s2">&quot;42 Wallaby Way&quot;</span><span class="p">,</span>
        <span class="s2">&quot;address_2&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;city&quot;</span><span class="p">:</span> <span class="s2">&quot;Sydney&quot;</span><span class="p">,</span>
        <span class="s2">&quot;state&quot;</span><span class="p">:</span> <span class="s2">&quot;NSW&quot;</span><span class="p">,</span>
        <span class="s2">&quot;country&quot;</span><span class="p">:</span> <span class="s2">&quot;AU&quot;</span><span class="p">,</span>
        <span class="s2">&quot;zip&quot;</span><span class="p">:</span> <span class="s2">&quot;2000&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span>
    <span class="n">json_str</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1"># Optional: encode json str to utf-8.</span>
    <span class="k">return</span> <span class="n">json_str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">post_data</span><span class="p">(</span><span class="n">json_str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This is a fictional API request that passes a json object to requests.</span>
<span class="sd">    It decodes the server response with response.json() and</span>
<span class="sd">    Returns dictionary value by calling the data&#39;s keys.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Bearer </span><span class="si">{</span><span class="n">token</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">,</span>
        <span class="s2">&quot;cache-control&quot;</span><span class="p">:</span> <span class="s2">&quot;no-cache&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">request</span><span class="p">(</span>
        <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span>
        <span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://SomeSoftwareAPI.com/people/&quot;</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="n">json_str</span><span class="p">,</span>
        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="c1"># Call dict keys to get their values.</span>
    <span class="n">contact_id</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;contact_id&quot;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">contact_id</span>


<span class="n">json_str</span> <span class="o">=</span> <span class="n">dict_to_json_data</span><span class="p">()</span>
<span class="n">contact_id</span> <span class="o">=</span> <span class="n">post_data</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
</pre></div></td></tr></table></div>
<!--  -->
<blockquote>
<p><strong>requests.request keyword argument alternatives for passing data</strong></p>
<p><strong>params</strong> – (optional) Dictionary, list of tuples or bytes to send in the query string for the Request.</p>
<p><strong>data</strong> – (optional) Dictionary, list of tuples, bytes, or file-like object to send in the body of the Request</p>
<p><strong>json</strong> – (optional) A JSON serializable Python object to send in the body of the Request</p>
<p><strong>[</strong><a class="reference external" href="https://requests.readthedocs.io/en/latest/api/">requests API documentation</a><strong>]</strong></p>
</blockquote>
<p><strong>&quot;Gotchyas&quot; To Avoid</strong></p>
<ul class="simple">
<li><a class="reference external" href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes">Status codes</a> are your friend. They offer a hint at why your request is not working. If you see 200 or 201, that's a good sign. They're usually helpful, but sometimes they can be misleading.</li>
<li>Ensure you are defining the correct content-type. I had an experience where Postman defined two conflicting <strong>content-type</strong> headers and it <a class="reference external" href="https://github.com/postmanlabs/postman-code-generators/issues/215">caused my request to fail</a>. The server's error message indicated the problem was in my JSON, so it took me a while to figure out the headers were the problem.</li>
<li>Sometimes it makes a difference if your url has <strong>http://</strong> vs. <strong>https://</strong> in it. Usually <strong>https://</strong> is preferred.</li>
</ul>
<p><strong>Sidebar:</strong> <a class="reference external" href="https://requests.readthedocs.io/en/master/user/advanced/">requests.Session()</a></p>
<p>You might be able to improve performance by using a requests <a class="reference external" href="https://requests.readthedocs.io/en/master/user/advanced/">&quot;session&quot; object</a>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>


<span class="c1"># A session adds a &quot;keep-alive&quot; header to your HTTP connection + stores cookies across requests.</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://exampleapi.com/widgets/</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div></td></tr></table></div>
<p><strong>Dig deeper into requests by raising your HTTPConnection.debuglevel</strong></p>
<blockquote>
<strong>HTTPResponse.debuglevel:</strong> A debugging hook. If <a class="reference external" href="https://docs.python.org/3/library/http.client.html#http.client.HTTPResponse.debuglevel">debuglevel</a> is greater than zero, messages will be printed to stdout as the response is read and parsed.
Source: <a class="reference external" href="https://docs.python.org/3/library/http.client.html#http.client.HTTPResponse.debuglevel">http.client Python Docs</a></blockquote>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">from</span> <span class="nn">http.client</span> <span class="kn">import</span> <span class="n">HTTPConnection</span>
<span class="kn">import</span> <span class="nn">requests</span>


<span class="n">HTTPConnection</span><span class="o">.</span><span class="n">debuglevel</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="p">:</span><span class="s2">&quot;Add_Google_API_Key_Here&quot;</span><span class="p">,</span> <span class="s2">&quot;address&quot;</span><span class="p">:</span><span class="s2">&quot;90 Miles&quot;</span><span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://maps.googleapis.com/maps/api/geocode/json&quot;</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div></td></tr></table></div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>Web Server Gateway Interface (WSGI, pronounced &quot;Wis-Ghee&quot;)</strong></div>
</div>
<blockquote>
&quot;As described in <a class="reference external" href="https://www.python.org/dev/peps/pep-3333/">PEP3333</a>, the Python Web Server Gateway Interface (WSGI) is a way to make sure
that web servers and python web applications can talk to each other.&quot;  <a class="reference external" href="https://docs.gunicorn.org/en/latest/install.html">Gunicorn</a> is one
of <a class="reference external" href="https://flask.palletsprojects.com/en/1.1.x/deploying/wsgi-standalone/#uwsgi">a few Python WSGI clients</a>.
<a class="reference external" href="https://lofipython.com/2016/04/30/useful-links-for-web2py-beginners/">web2py</a> is another WSGI client and web framework I have used.</blockquote>
<p><strong>Conclusion</strong></p>
<p>I remember APIs seemed mysterious and daunting before I had used them. But like all things, they can be conquered with knowledge, understanding and tenacity to keep trying until you figure it out. Good luck!</p>
<p><strong>Requests Documentation</strong></p>
<p><a class="reference external" href="https://requests.readthedocs.io/en/master/api/">requests.request() API documentation</a></p>
<p><a class="reference external" href="https://requests.readthedocs.io/en/latest/api/#requests.get">requests.get() API documentation</a></p>
<p><a class="reference external" href="https://requests.readthedocs.io/en/latest/api/#requests.post">requests.post() API documentation</a></p>
<p><strong>Supplementary Reading</strong></p>
<p><a class="reference external" href="https://developers.google.com/web/tools/chrome-devtools/network/reference#timing-explanation">Google's HTTP Timing Explanation</a></p>
<p><a class="reference external" href="https://github.com/Rolstenhouse/unofficial-apis">List of Interesting &quot;Unofficial&quot; APIs</a></p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Proxy_server">Proxy servers</a></p>
<p><a class="reference external" href="https://pawelmhm.github.io/asyncio/python/aiohttp/2016/04/22/asyncio-aiohttp.html">Making 1 million requests with python-aiohttp</a></p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Nginx">Nginx</a></p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">Create, read, update and delete (CRUD)</a></p>
</div>

                <div class="clear"></div>

                <div class="info">
                    <a href="https://lofipython.com/how-to-make-json-requests-with-python.html">posted at 05:41</a>
                    &nbsp;&middot;&nbsp;<a href="https://lofipython.com/category/chicago-coding-http-json-pandas-programming.html" rel="tag">Chicago, coding, HTTP, json, pandas, programming</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://lofipython.com/tag/api.html" class="tags">api</a>
                    &nbsp;<a href="https://lofipython.com/tag/data.html" class="tags">data</a>
                    &nbsp;<a href="https://lofipython.com/tag/python.html" class="tags">python</a>
                    &nbsp;<a href="https://lofipython.com/tag/requests.html" class="tags">requests</a>
                    &nbsp;<a href="https://lofipython.com/tag/sandwiches.html" class="tags">sandwiches</a>
                    &nbsp;<a href="https://lofipython.com/tag/web.html" class="tags">web</a>
                </div>
            </article>            <h4 class="date">May 06, 2020</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://lofipython.com/exploring-windows-command-line-tools-batch-file-automation-and-remote-desktop-connection.html" rel="bookmark" title="Permanent Link to &quot;Script Windows Like A Pro: Command Line, Batch Files, Remote Desktop Connection and pywin32&quot;">Script Windows Like A Pro: Command Line, Batch Files, Remote Desktop Connection and pywin32</a>
                </h2>

                
                

                <p>Here are a few useful corners of the vast array of Windows scripting tools.</p>
<div class="section" id="helpful-windows-command-line-documentation">
<h2>Helpful Windows Command Line Documentation</h2>
<ul class="simple">
<li><a class="reference external" href="https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/command-line-syntax-key">Windows command line Documentation Syntax</a></li>
<li><a class="reference external" href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-xp/bb490890%28v%3dtechnet.10%29">Command-line reference A-Z</a></li>
<li><a class="reference external" href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-xp/bb490954%28v%3dtechnet.10%29">Command shell overview</a></li>
<li><a class="reference external" href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-xp/bb490982%28v%3dtechnet.10%29">Using command redirection operators</a></li>
<li><a class="reference external" href="https://docs.microsoft.com/en-us/windows/win32/winrm/about-windows-remote-management">About Windows Remote Management</a></li>
</ul>
</div>
<div class="section" id="a-few-general-windows-commands">
<h2>A Few General Windows Commands</h2>
<p>Use  <a class="reference external" href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-xp/bb490906(v=technet.10)">find</a>
to look in a text file to count the lines matching a string:</p>
<pre class="literal-block">
find /C &quot;FAIL&quot; &lt; &quot;Test_Results.txt&quot;
# returns: 0 if no match or # of lines found, e.g. 2,50,100
</pre>
<p>I wrote a post on <a class="reference external" href="https://lofipython.com/findstr-aka-grep-for-windows/">findstr</a>, which offers similar functionality.</p>
<ul class="simple">
<li><strong>clip:</strong> pipe commands <a class="reference external" href="https://www.hanselman.com/blog/ForgottenButAwesomeWindowsCommandPromptFeatures.aspx">into the clipboard</a>.</li>
<li><strong>If:</strong> <a class="reference external" href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-xp/bb490920(v=technet.10)">If</a> Statements based on if files exist.</li>
<li><strong>List ip address-related info:</strong></li>
</ul>
<pre class="literal-block">
ipconfig
</pre>
<p><strong>Check system bit (usually 64-bit or 32-bit):</strong></p>
<pre class="literal-block">
wmic os getosarchitecture
</pre>
</div>
<div class="section" id="automate-windows-scripts-with-batch-files">
<h2>Automate Windows Scripts with Batch Files</h2>
<p>Batch files can be run from command prompt or by double-clicking them. Here's an example of text in a batch file that activates a python virtual environment. Swap in your username and environment if you've created it.</p>
<pre class="literal-block">
cmd /k &quot;cd C:\Users\your_username\PythonEnv\Scripts &amp; activate &amp; cd .. &amp; dir&quot;
</pre>
<ol class="arabic simple">
<li>Save above as a .bat file.</li>
<li>This uses <a class="reference external" href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-xp/bb490880%28v%3dtechnet.10%29">cmd</a> to open a new command prompt in a Windows batch file.</li>
<li><a class="reference external" href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-xp/bb490875(v=technet.10)">cd</a>into my python virtual env then activate it by running a batch file.</li>
<li>Then call dir to print directory contents.</li>
</ol>
<p><a class="reference external" href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-xp/bb490998(v=technet.10)">Set</a> a custom system 'last_name' variable to be recalled later.</p>
<pre class="literal-block">
set /p last_name=Enter a last name:
echo %last_name%
pause
</pre>
<p>Here we print it out with <a class="reference external" href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-xp/bb490897(v=technet.10)">echo</a>. Then <a class="reference external" href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-xp/bb490965(v=technet.10)">pause</a>.</p>
<p><strong>Line continuation in batch files:</strong> Use ^ to continue your batch file scripts on a new line.</p>
</div>
<div class="section" id="system-assessment-tools-powercfg-and-sfc">
<h2>System Assessment Tools: powercfg and sfc</h2>
<p><strong>Display system stats:</strong></p>
<pre class="literal-block">
systeminfo
</pre>
<p><strong>Use powercfg to assess power, sleep and system states</strong></p>
<pre class="literal-block">
powercfg /SLEEPSTUDY
</pre>
<p>Use sfc to perform a system file check:</p>
<pre class="literal-block">
# scan and repair
sfc /SCANNOW
# scan, but do not repair:
sfc /VERIFYONLY
</pre>
</div>
<div class="section" id="accessing-a-remote-computer-from-the-command-line">
<h2>Accessing a Remote Computer From the Command Line</h2>
<p>You may want to <a class="reference external" href="https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/ping">ping</a> a remote computer to see if it's running. Add your ip address instead of the below 1s and 0s:</p>
<pre class="literal-block">
ping 01.10.10.01
</pre>
<p>Log into your Remote Desktop with <a class="reference external" href="https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/mstsc">mstsc</a>:</p>
<ol class="arabic simple">
<li>Run Remote Desktop Connection, save an RDP file from Windows Desktop Client.</li>
<li>You may need to <a class="reference external" href="https://serverfault.com/questions/396722/your-system-administrator-does-not-allow-the-use-of-saved-credentials-to-log-on">adjust your credentials on your local machine.</a></li>
<li>Finally, trigger login to an active window from command prompt:</li>
</ol>
<pre class="literal-block">
mstsc RDP_File_Name.rdp
</pre>
<p><a class="reference external" href="https://docs.microsoft.com/en-us/windows/win32/winrm/portal">WinRM</a> and WinRS can allow terminal access to your Remote Desktop. You may need to set your wifi network to private. To configure winrm:</p>
<pre class="literal-block">
winrm quickconfig
</pre>
<p>Log into a remote computer with <a class="reference external" href="https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/winrs">winrs</a> and run ipconfig:</p>
<pre class="literal-block">
winrs -r:https://myserver.com -t:600 -u:administrator -p:$%fgh7 ipconfig
</pre>
</div>
<div class="section" id="check-out-python-s-pywin32-module">
<h2>Check Out Python's <a class="reference external" href="https://github.com/mhammond/pywin32">pywin32</a> Module</h2>
<p>This module is extremely useful for scripting out Windows applications. For example, I've made good use of its interfaces to Outlook
and <a class="reference external" href="https://lofipython.com/automated-python-with-windows-task-scheduler/">Task Scheduler</a>.
Install with <a class="reference external" href="http://lofipython.com/2018/01/20/how-to-python-pip-install-new-libraries/">pip</a>:</p>
<pre class="literal-block">
python -m pip install pywin32
</pre>
<p><strong>Here's an example to send an Outlook email:</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">win32com.client</span>

<span class="n">outlook</span> <span class="o">=</span> <span class="n">win32com</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">Dispatch</span><span class="p">(</span><span class="s1">&#39;outlook.application&#39;</span><span class="p">)</span>
<span class="n">mail</span> <span class="o">=</span> <span class="n">outlook</span><span class="o">.</span><span class="n">CreateItem</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">mail</span><span class="o">.</span><span class="n">To</span> <span class="o">=</span> <span class="s1">&#39;someone@example.com&#39;</span>
<span class="n">mail</span><span class="o">.</span><span class="n">CC</span> <span class="o">=</span> <span class="s1">&#39;name@example.com&#39;</span>
<span class="n">mail</span><span class="o">.</span><span class="n">Subject</span> <span class="o">=</span> <span class="s1">&#39;Moneyball Review&#39;</span>
<span class="n">mail</span><span class="o">.</span><span class="n">Body</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;Moneyball is an inspiring movie, based on real events.</span>
<span class="s2">            Brad Pitt, Jonah Hill and Philip Seymour Hoffmann gave great performances.</span>
<span class="s2">            The trade deadline scene is delightful. Wow.</span>
<span class="s2">            Chris Pratt as Hatteberg too. What a solid film.</span>
<span class="s2">            Money isn&#39;t everything. Playing ball is.</span>
<span class="s2">            &quot;&quot;&quot;</span>
<span class="n">mail</span><span class="o">.</span><span class="n">Attachments</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s1">&#39;Baseball_Analysis.csv&#39;</span><span class="p">)</span>
<span class="n">mail</span><span class="o">.</span><span class="n">Send</span><span class="p">()</span>
</pre></div></td></tr></table></div>
</div>

                <div class="clear"></div>

                <div class="info">
                    <a href="https://lofipython.com/exploring-windows-command-line-tools-batch-file-automation-and-remote-desktop-connection.html">posted at 14:11</a>
                    &nbsp;&middot;&nbsp;<a href="https://lofipython.com/category/automation-command-prompt-scripts-windows.html" rel="tag">automation, command prompt, Scripts, Windows</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://lofipython.com/tag/command-line.html" class="tags">command line</a>
                    &nbsp;<a href="https://lofipython.com/tag/remote-computer.html" class="tags">remote computer</a>
                    &nbsp;<a href="https://lofipython.com/tag/scripting.html" class="tags">scripting</a>
                    &nbsp;<a href="https://lofipython.com/tag/shell.html" class="tags">shell</a>
                </div>
            </article>            <h4 class="date">Apr 11, 2020</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://lofipython.com/reflections-on-5-years-of-solving-problems-with-python.html" rel="bookmark" title="Permanent Link to &quot;Reflections on 5 Years of Solving Problems with Python&quot;">Reflections on 5 Years of Solving Problems with Python</a>
                </h2>

                
                

                <p>Prior to learning Python, I had no programming experience. I worked in marketing for a book publisher and did not perform well at my job. It was not a good fit. They eventually fired me. As my previous job unraveled, I discovered Python and the Coursera course, <a class="reference external" href="https://www.coursera.org/learn/python?utm_medium=email&amp;utm_source=other&amp;utm_campaign=opencourse.course_complete.python.%7Eopencourse.course_complete.7A1yFTaREeWWBQrVFXqd1w.">Programming for Everybody (Getting Started with Python)</a>. Fortunately, that course jump-started me onto a path of learning and reading each day. My aim was to make my own website, a <a class="reference external" href="https://pythonmarketer.wordpress.com/2016/05/25/askkevinparker-com-my-first-web-app-other-notes/">goal that I accomplished</a>. I needed to know how the sausage was made.</p>
<p>Looking back from 2020, I can safely say Python changed my life. Because of it, I now have a fulfilling marketingdata-oriented career. I'm also grateful for the financial stability that came with it. I love to learn about the language and continue to improve my abilities to solve problems with new tools, not only Python.</p>
<p>Below are pieces of wisdom picked up from my experiences. They are the result of many hours of study, reading, mistakes, luck, toil and eventual glory.</p>
<p><strong>These are thought-provoking adages and guidelines, not absolute truths in all cases.</strong></p>
<ol class="arabic simple">
<li>Developing a habit of learning pays off over time, no matter what the subject is. It is an investment in yourself that compounds.</li>
<li>Follow your own curiosity. It's less important to compare what you know to others. Compare what you know today to what you knew yesterday. Don't worry about <a class="reference external" href="https://nedbatchelder.com/blog/202003/how_long_did_it_take_you_to_learn_python.html">how long it takes to learn</a>.</li>
<li>Watch educational or technical conference talks on sites like <a class="reference external" href="https://www.youtube.com/channel/UCMjMBMGt0WJQLeluw6qNJuA/videos">YouTube</a> or InfoQ. <a class="reference external" href="https://www.infoq.com/presentations/Simple-Made-Easy/">Rich Hickey,</a> <a class="reference external" href="https://rhodesmill.org/brandon/talks/#selenium-at-scale">Brandon Rhodes</a> and <a class="reference external" href="https://www.youtube.com/watch?v=lyDLAutA88s">David Beazley</a> are some of my favorite speakers. Watch talks from all languages, not just Python. Often the concepts apply to any programming language.</li>
<li>Use an RSS reader. Anytime you find a good blog, subscribe by RSS or email to get new posts. I use the <a class="reference external" href="https://chrome.google.com/webstore/detail/rss-feed-reader/pnjaodmkngahhkoihejjehlcdlnohgmp?hl=en">Feeder Chrome extension</a>\Android app.</li>
<li>The <a class="reference external" href="https://www.python.org/dev/peps/pep-0020/">Zen of Python</a> contains a lot of wisdom. I like the concept of <tt class="docutils literal">Explicit is better than implicit.</tt> This implies declaring your actions in written or oral fashion, providing additional context. Consider favoring easier to read solutions over clever one-liners. For example:<ul>
<li><a class="reference external" href="https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions">List comprehensions</a> are useful and &quot;pythonic&quot;, use them! But sometimes it's easier to use a for loop to hash out an idea. (Contrarily, avoiding the <a class="reference external" href="https://www.youtube.com/watch?v=W-lZttZhsUY">Initialize Then Modify</a> pattern benefits those comfortable with comprehensions.)</li>
<li>Explicitly using <a class="reference external" href="https://treyhunner.com/2018/04/keyword-arguments-in-python/">keyword arguments</a> versus positional arguments is another way to make your code easier to understand.</li>
</ul>
</li>
<li>Can you explain the solution simply? If not, try to clarify your understanding or maybe there's a simpler way. In Python, there are often several ways to accomplish the same goal. But keep in mind the Zen of Python: <tt class="docutils literal">There should be <span class="pre">one--</span> and preferably only one <span class="pre">--obvious</span> way to do it. Although that way may not be obvious at first unless you're Dutch.</tt> Look for the obvious way. An example of this is <a class="reference external" href="https://www.blog.pythonlibrary.org/2020/04/07/python-101-working-with-strings/">string formatting.</a> I've heard f-strings are the hot new way to do this now.</li>
<li>Don't be afraid to change course if things don't feel right. Ask yourself while coding, &quot;Does this feel efficient?&quot; Recently I was trying to format a json string so I approached it like I had in the past, by <a class="reference external" href="https://lofipython.com/how-to-make-json-requests-with-python/">exporting the request from Postman and formatting the json string</a> with python's <a class="reference external" href="https://docs.python.org/3/library/functions.html?highlight=format#format">format() built-in</a>. But this time, the curly braces were confusing me, I was struggling and it wasn't working. I googled and around and saw python's <a class="reference external" href="https://docs.python.org/3/library/json.html?highlight=json#module-json">json module</a> and <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_json.html">df.to_json()</a> in pandas. They were a much easier and better-looking solution. But it still wasn't working. Finally, i used the Postman approach and f-strings to format a successful payload. The third try worked! F-strings are super nice and clean.</li>
<li>If you're stuck, there's probably a free online course or blog post that explains whatever is confusing you. Use the Googles. When in doubt, Google the error message.</li>
<li>Begin your project by writing a list of requirements. This often leads to good questions and cases that may need to be addressed. The book <a class="reference external" href="https://www.amazon.com/gp/product/0735619670/">Code Complete 2</a> covers establishing project requirements in great detail, along with the other stages in the life-cycle of a software project. I'm really enjoying this book and highly recommend it.</li>
<li>Names are really important. Take time to think about a good name for your variables and functions. Also, name your scripts well. I name my scripts using <a class="reference external" href="https://examples.yourdictionary.com/action-verb-examples.html">action verbs</a>. For example, my script that organizes accumulated files on my desktop into folders is named <tt class="docutils literal">clean_desktop_files.py</tt>. When I see this script months later, its name reminds me the action the script is performing. I believe it's better to err on the side of longer, more descriptive names for variables and functions. It makes code easier to understand. But there is a trade-off with length to keep in check.</li>
<li>Moving a block of code into a function can abstract away repetitive code and increase its readability.</li>
<li>Each function should do one thing only. Follow the <a class="reference external" href="https://en.wikipedia.org/wiki/Single-responsibility_principle">single-responsibility principle</a>.</li>
<li>Train yourself to think in <a class="reference external" href="https://docs.python.org/3/tutorial/datastructures.html">data structure</a> conversions. The Python dictionary is very useful and can be converted to and from lists, tuples, sets, etc. I often find it more efficient to convert to a different structure to efficiently organize it. Usually I am googling things like &quot;convert class object to python dictionary&quot; because dictionaries are easy to work with or convert to other structures. The <tt class="docutils literal">vars()</tt> built-in is great for converting objects to a dictionary. For example, once you have a dictionary, you might be able to solve your problem by <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.from_dict.html">converting it to a dataframe</a>.</li>
<li>Use only the data you need. Reading in just the essential data helps avoid memory issues and hanging programs. In <a class="reference external" href="https://pythonmarketer.wordpress.com/2018/04/10/creating-isolated-python-environments-with-virtualenv/">pandas</a>, the <tt class="docutils literal">usecols</tt> argument in <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html">pd.read_csv()</a> is great for this. This creates a dataframe with 2 columns:</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;emails.csv&#39;</span><span class="p">,</span> <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;email&#39;</span><span class="p">])</span>
</pre></div></td></tr></table></div>
<ol class="arabic simple" start="15">
<li>Assume that if something is broken, it's because of something you've done. Start from the assumption that your code contains the bug and work outward by eliminating possibilities. Avoid jumping to quick conclusions. Instead, carefully consider possible reasons for why something is happening. Many times, I find my 2nd or 3rd hypothesis is actually true.</li>
<li>There will be times when you'll look at someone else's choices and wonder why they did things a certain way. Consider the possibility that they know more than you in this domain.</li>
<li>Beware of sequencing errors. Are your tasks, scripts or functions executing in an efficient order to reach your end goal? Look to unblock bottlenecks and correct chronological mistakes in your processes.</li>
<li>Before you send that email asking for help, go back and take another look. There's also no shame in asking for help. Be sure you proofread your email before sending.</li>
<li><a class="reference external" href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes">Status code 200</a> does not guarantee your API request was successful. You may want to write a test to confirm success that doesn't rely on response status codes.</li>
<li>Unfortunately, <a class="reference external" href="https://lofipython.com/a-collection-of-software-testing-opinions-for-python-and-beyond/">testing</a> gets shunned sometimes. Make it a priority. I enjoy writing <a class="reference external" href="https://lofipython.com/automating-pytest-on-windows-with-a-bat-file-python-task-scheduler-and-box/">pytest tests</a> more than most other code. Why? Because tests confirm my scripts are working to some degree, detect bugs and provide a refactoring safety net.</li>
<li>Refactoring your code is a crucial step in making it better. Coming back to my code after a few weeks, months or years brings clarity, experience and a new perspective. It feels good to improve the quality of my old work.</li>
<li>Consolidate your tasks. Bundling things can save you a bundle of time! Identify redundant patterns and remove if possible. Observe yourself while working. Any repetitive manual process can probably be automated away. Recently, I figured out how to use a <a class="reference external" href="https://www.windowscentral.com/how-create-and-run-batch-file-windows-10">Windows batch file</a> to instantly activate my Python <a class="reference external" href="https://pythonmarketer.wordpress.com/2018/04/10/creating-isolated-python-environments-with-virtualenv/">virtual environment</a>. It took me a few years of tediously pasting the <tt class="docutils literal">cd</tt> and <tt class="docutils literal">activate</tt> commands into command prompt every day to realize. Now it's a snap.</li>
<li>Stack Overflow is a useful resource. But the top answers may be outdated. Check the other less popular answers sometimes. Or...</li>
<li>Read the documentation! An updated or more elegant solution might be there. I recently found <tt class="docutils literal">os.makedirs(path, exist_ok=True)</tt> in the <a class="reference external" href="https://docs.python.org/3/library/os.html#os.makedirs">os docs</a>. I didn't know about the <tt class="docutils literal">exist_ok</tt> argument. I was creating folders with a more complicated alternative from <a class="reference external" href="https://stackoverflow.com/questions/273192/how-can-i-safely-create-a-nested-directory">Stack Overflow</a> for years. I use this way all the time now. In the same vein, if you need the local system username, the Python docs state <a class="reference external" href="https://docs.python.org/3.8/library/getpass.html">getpass.getuser()</a> is preferred over os.getlogin().</li>
<li>Write documentation explaining how to use your projects. Even if you can only muster a quick <a class="reference external" href="https://en.wikipedia.org/wiki/README">README</a> text file, that's better than nothing. Within your code, <a class="reference external" href="https://www.python.org/dev/peps/pep-0257/">docstrings</a> are a nice addition. I have yet to use <a class="reference external" href="https://www.sphinx-doc.org/en/master/">Sphinx</a>, but it is a popular choice for generating documentation.</li>
<li>Teaching others feels good and solidifies your knowledge. Writing and pair programming are great ways to improve your understanding and pass your skills along to other people. While we're on the subject of writing...</li>
<li>Write everything down! Your head is not good at storing information in memory. Computers are. This frees your mind to come up with new ideas rather than expending energy to remember what you've already done. It also helps you plan. I use a Notepad text file to keep a running to-do list. You could also use services like Trello or Microsoft Planner. While writing code, use comments and docstrings conservatively for quick notes, clarifications or reminders. The important thing is to write it down somewhere.</li>
<li>When editing your writing, continually ask yourself, &quot;Do I need this word or phrase?&quot; for every word you write.</li>
</ol>
<!--  -->
<blockquote>
&quot;Brevity is the soul of wit.&quot; - William Shakespeare (Hamlet)</blockquote>
<ol class="arabic simple" start="29">
<li>Draw inspiration from culture, nature and professional disciplines outside of your own. <a class="reference external" href="https://lofipython.com/lessons-learned-from-lost-in-space-on-netflix/">Insights can be mined from anything</a>. Don't dismiss a situation as mundane without first scanning for knowledge nuggets and gems.</li>
<li>Better solutions often come to me after gaining time and experience with a problem. Building software is an iterative cycle of adjustment towards consistently fulfilling the needs of those it serves in 100% of cases. In a perfect world, you'd never have bugs. But edge cases tend to pop up in ways you didn't think of when you first wrote a solution. There will also be projects where requirements or business rules change. Consider that possibility when you are designing your solution.</li>
<li>It's possible to find a job that you're excited about and genuinely enjoy the work.</li>
<li>Respect your craft, whether it's coding or another profession. A skilled carpenter needs precision, practice and focus to make something beautiful. Approach your craft with the same mindset and pride in making your best art.</li>
<li>We all have holes in our knowledge. Be receptive to other ways of thinking. The best way to learn is from other humans. Everyone has different backgrounds and experiences. I have never used object oriented programming, classes or certain command line tools like <a class="reference external" href="https://www.howtogeek.com/336775/how-to-enable-and-use-windows-10s-built-in-ssh-commands/">ssh</a>. I have a loose understanding of these things but have not yet applied them to my projects. Working with paths (os and pathlib) still gives me fits sometimes. These are knowledge gaps that I want to fill in. Additionally, we don't know what we don't know. Try to illuminate the fog of your unknown.</li>
<li>Choosing to dedicate to learning Python is among the best decisions I've made.</li>
<li>Attitude is more important than intelligence. Anyone can learn to program, play guitar or fly an airplane. You can become an adept problem solver. Acquire an attitude to support your determination and persistence.</li>
</ol>
<p>[caption id=&quot;attachment_2981&quot; align=&quot;alignnone&quot; width=&quot;959&quot;]<a class="reference external image-reference" href="https://www.youtube.com/watch?v=I56oFTm9UlE"><img alt="brandonrhodes" class="alignnone size-full wp-image-2981" src="https://pythonmarketer.files.wordpress.com/2020/04/brandonrhodes.png" style="width: 959px; height: 541px;" /></a> Brandon Rhodes: Stopping to Sharpen Your Tools - PyWaw Summit 2015[/caption]</p>
<p><strong>I'll leave you with the 4 P's and 4 C's from my</strong> <a class="reference external" href="https://www.youtube.com/watch?v=SfQYA0JQWkA">Programming for Everybody Coursera course graduation ceremony</a><strong>. Cultivating these principles will guide you to growing your education and finding a positive course in life:</strong></p>
<blockquote>
<p><strong>4 P's:</strong> Passion, Purpose, Persistence, Playfulness</p>
<p><strong>4 C's:</strong> Choice, Commitment, Connection, Completion</p>
</blockquote>
<p>Thank you for reading and I hope this post helps you on your own educational journey.</p>

                <div class="clear"></div>

                <div class="info">
                    <a href="https://lofipython.com/reflections-on-5-years-of-solving-problems-with-python.html">posted at 17:15</a>
                    &nbsp;&middot;&nbsp;<a href="https://lofipython.com/category/coding-education-marketing-programming-python-wisdom.html" rel="tag">coding, education, Marketing, programming, python, wisdom</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://lofipython.com/tag/advice.html" class="tags">advice</a>
                    &nbsp;<a href="https://lofipython.com/tag/learning.html" class="tags">learning</a>
                    &nbsp;<a href="https://lofipython.com/tag/problem-solving.html" class="tags">problem solving</a>
                    &nbsp;<a href="https://lofipython.com/tag/writing.html" class="tags">writing</a>
                </div>
            </article>            <h4 class="date">Mar 22, 2020</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://lofipython.com/easy-wins-for-your-windows-computer.html" rel="bookmark" title="Permanent Link to &quot;Easy Tune-ups For Your Windows Computer&quot;">Easy Tune-ups For Your Windows Computer</a>
                </h2>

                
                

                <div class="section" id="this-post-covers-6-handy-windows-tools">
<h2>This post covers 6 handy Windows tools:</h2>
<ol class="arabic simple">
<li>Windows Experience Index</li>
<li>Disk Cleanup</li>
<li>Windows Update Troubleshooter</li>
<li>Windows Update</li>
<li>Microsoft Support and Recovery Assistant</li>
<li>Disk Defragmenter</li>
</ol>
</div>
<div class="section" id="first-get-your-baseline-windows-experience-index-score">
<h2><strong>First, get your baseline Windows Experience Index score.</strong></h2>
<p>These metrics are a way to monitor your system's performance over time.</p>
<ol class="arabic simple">
<li>Go to &quot;Control PanelSystem and SecuritySystem&quot;</li>
<li>Select &quot;Your Windows Experience Index needs to be refreshed.&quot;</li>
<li>Note the metrics you see and the last updated date. If you've never refreshed them, these are likely your computer's factory scores.</li>
<li>Then click &quot;Refresh Now&quot; and note the results. These are your computer's current scores.</li>
</ol>
<img alt="check_Windows_Experience_Index" class="alignnone size-full wp-image-2780" src="http://pythonmarketer.files.wordpress.com/2020/03/f6e0a-check_windows_experience_index-e1584936945758.jpg" style="width: 729px; height: 501px;" />
</div>
<hr class="docutils" />
<div class="section" id="run-disk-cleanup">
<h2><strong>Run Disk Cleanup</strong></h2>
<p>The name says it all. Go to the Start menu and search 'Disk Cleanup'. Running this freed up 40 GB of C: drive space for me.</p>
</div>
<hr class="docutils" />
<div class="section" id="install-os-patches-and-software-updates-with-windows-update">
<h2><strong>Install OS patches and software updates with Windows Update.</strong></h2>
<p><strong>First, troubleshoot Windows Update to fix any errors.</strong></p>
<img alt="tdhotingtrpot2" class="wp-image-2790 alignright" src="http://pythonmarketer.files.wordpress.com/2020/03/83836-tdhotingtrpot2-e1584941263675.jpg" style="width: 357px; height: 274px;" />
<p>The <a class="reference external" href="https://support.microsoft.com/en-us/help/4027322/windows-update-troubleshooter">Windows Update Troubleshooter</a>is supported by Windows and may help&nbsp;with updates that fail. I downloaded the troubleshooter for Windows Update and BITS, the Windows <a class="reference external" href="https://docs.microsoft.com/en-us/windows/win32/bits/background-intelligent-transfer-service-portal">Background Intelligence Transfer System.</a></p>
<p>The troubleshooter analyzes Windows Update and tries to fix the errors it finds. After running, it provides a status update on the issues it finds.</p>
<p><strong>Run Windows Update to upgrade your software.</strong></p>
<p>Windows Update usually updates your software reliably. However, some updates may fail or are not triggered automatically. Installing updates, especially security patches for your operating system is typically a good idea.In my case, several Windows 7 OS security patches had not auto-updated, some from 6 months ago.</p>
<p>Checking for Software Updates</p>
<ul class="simple">
<li>Go to your start menu and search for 'Windows Update'.</li>
<li>I clicked 'Check online for updates from Windows Update' also.</li>
<li>When you restart your computer, use a power cord for your laptop.</li>
<li>I found more new updates twice after installing new updates and restarting my system.&nbsp; Some updates are required before another update may be installed.</li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="microsoft-support-and-recovery-assistant">
<h2>Microsoft Support and Recovery Assistant</h2>
<p><strong>Got Microsoft Errors?</strong> Check out the <a class="reference external" href="https://support.office.com/en-us/article/about-the-microsoft-support-and-recovery-assistant-e90bb691-c2a7-4697-a94f-88836856c72f">Microsoft Support and Recovery Assistant</a>. It may help you if you're having trouble with Microsoft Office, Skype or any other Windows&nbsp;tools.</p>
<img alt="options_recovery" class="wp-image-3225 alignnone" src="http://pythonmarketer.files.wordpress.com/2020/03/1ea73-options_recovery-e1587747001750.jpg" style="width: 465px; height: 350px;" />
</div>
<hr class="docutils" />
<div class="section" id="finally-defragment-your-c-drive">
<h2><strong>Finally, defragment your C: drive.</strong></h2>
<p>Defragmentation is like spring cleaning for your computer's hard disk. It optimizes your drive's data for more efficient computing and frees up space for other activities.</p>
<ol class="arabic simple">
<li>Go to your start menu and search for 'Disk Defragmenter'.</li>
<li>Click 'Analyze disk' to check your C: Drive's fragmented rate.</li>
<li>If the fragmented rate is above 10%, <a class="reference external" href="https://support.microsoft.com/en-us/help/17126/windows-7-improve-performance-defragmenting-hard-disk">Windows recommends</a> to defragment your C: Drive. As you can see below, mine had a whopping 48% fragmentation rate. 😨 My poor computer had never been defragged in 2.5 years of use.</li>
</ol>
<img alt="defragment_results" class="alignnone size-full wp-image-2740" src="http://pythonmarketer.files.wordpress.com/2020/03/699fd-defragment_results-e1585007505765.jpg" style="width: 658px; height: 529px;" />
<p><strong>46% Less Fragmented Disk Space After Two Defrags</strong></p>
<p>Running the defragmenter once reduced my drive's fragmentation from 48% to 32%. Re-running the defragmenter dropped my C: drive to a 2% fragmented rate. That's more like it. 🤓</p>
<blockquote>
<div class="ng-scope docutils container">
Fragmentation makes your hard disk do extra work that can slow down your computer. Removable storage devices such as USB flash drives can also become fragmented. Disk Defragmenter in Windows rearranges fragmented data so your disks and drives can work more efficiently.</div>
<div class="docutils container">
Source: <a class="reference external" href="https://support.microsoft.com/en-us/help/17126/windows-7-improve-performance-defragmenting-hard-disk">Ways to Improve Your Computer's Performance</a></div>
</blockquote>
</div>
<hr class="docutils" />
<div class="section" id="my-windows-7-system-improvement-results">
<h2><strong>My Windows 7 System Improvement Results</strong></h2>
<ul class="simple">
<li>Raised Windows Experience Index base sub-score from 4.9 to 5.0/7.9.</li>
<li>Added 40 GB of hard drive space thanks to Disk Cleanup.</li>
<li>Patched operating system security vulnerabilities and all software is up to date.</li>
<li>Fixed any misbehaving Windows products.</li>
<li>Decreased fragmented drive space from 48% to 2%. Windows recommends keeping it under 10%.</li>
</ul>
<p>On paper, that looks great. Hopefully it means less spinning lag wheels and programs not responding when you really shoulda saved that document...&nbsp; <a class="reference external" href="https://www.youtube.com/watch?v=e2cjVhUrmII">We'll see</a>.</p>
</div>

                <div class="clear"></div>

                <div class="info">
                    <a href="https://lofipython.com/easy-wins-for-your-windows-computer.html">posted at 22:59</a>
                    &nbsp;&middot;&nbsp;<a href="https://lofipython.com/category/performance-windows.html" rel="tag">performance, Windows</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://lofipython.com/tag/maintenance.html" class="tags">maintenance</a>
                    &nbsp;<a href="https://lofipython.com/tag/operating-system.html" class="tags">operating system</a>
                    &nbsp;<a href="https://lofipython.com/tag/windows-update.html" class="tags">windows update</a>
                </div>
            </article>            <h4 class="date">Mar 21, 2020</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://lofipython.com/automating-pytest-on-windows-with-a-bat-file-python-task-scheduler-and-box.html" rel="bookmark" title="Permanent Link to &quot;Automating pytest on Windows with a .bat file, Python, Task Scheduler and Box&quot;">Automating pytest on Windows with a .bat file, Python, Task Scheduler and Box</a>
                </h2>

                
                

                <p><strong>Automatic pytest Testing and Failure Alert Monitoring</strong></p>
<p>This is my solution to replace manually running pytest each day in command prompt. I want to automate running pytest every day, test if my automated python scripts ran smoothly and get notified if any tests fail.</p>
<p>Installing <a class="reference external" href="https://docs.pytest.org/en/latest/getting-started.html">pytest</a>, a Python testing library:</p>
<pre class="literal-block">
python -m pip install pytest
</pre>
<p><strong>A Few Words on pytest</strong></p>
<p>It is a unit test framework in python. pytest expects you to write each test as a self-contained function. One python file can contain many different test functions.</p>
<p><strong>Writing a Test</strong></p>
<p>Let's use <strong>test_file_date.py</strong> as our test, which uses the <a class="reference external" href="https://docs.python.org/3/library/glob.html">glob</a> module and <a class="reference external" href="https://docs.python.org/2/library/os.path.html#os.path.getmtime">os.getmtime</a> to get the csv with the most recent modification dateon my desktop. Then it tests if that date is today, in my case, for an expected daily file drop.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">date</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">getpass</span>


<span class="k">def</span> <span class="nf">test_csv_date_equals_today</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The match format is for a Windows path with Unix style pattern matching.&quot;&quot;&quot;</span>
    <span class="n">match</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;C:Users/</span><span class="si">{</span><span class="n">getpass</span><span class="o">.</span><span class="n">getuser</span><span class="p">()</span><span class="si">}</span><span class="s2">/Desktop/*.csv&quot;</span>
    <span class="c1"># Get the most recent csv from a folder.</span>
    <span class="n">csv</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">iglob</span><span class="p">(</span><span class="n">match</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getmtime</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">csv_timestamp</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getmtime</span><span class="p">(</span><span class="n">csv</span><span class="p">)</span>
    <span class="n">csv_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">csv_timestamp</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">csv_date</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">csv_date</span><span class="o">.</span><span class="n">day</span> <span class="o">==</span> <span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="o">.</span><span class="n">day</span>
</pre></div></td></tr></table></div>
<p><strong>Here's the pytest text output when the test is passing:</strong></p>
<pre class="literal-block">
============================= test session starts =============================
platform win32 -- Python 3.8.1, pytest-5.3.5, py-1.8.1, pluggy-0.13.1
rootdir: C:\
collected 1 item

..\..\Users\erick\Desktop\test_file_date.py . [ 14%]
                                                                   [100%]

============================== 1 passed in 0.28s ==============================
</pre>
<p><strong>Creating a Task with Windows Task Scheduler</strong></p>
<p>If you haven't used python with Windows Task Scheduler before, <a class="reference external" href="https://lofipython.com/automated-python-with-windows-task-scheduler/">my previous post</a> on creating a task may help you. We'll create two of them for our testing system.</p>
<p><strong>Adding Your Task Scheduler Program: a Windows .bat file</strong></p>
<p>Add your username to the text below and adjust the paths to your system. Then save a <a class="reference external" href="https://en.wikipedia.org/wiki/Batch_file">Windows .bat file</a> with this text, which points to your pytest.exe file:</p>
<pre class="literal-block">
cmd /c &quot;C:\Users\your_username\Desktop\sandbox\Scripts\pytest.exe --capture=sys&quot; ^
C:\Users\your_username\Desktop\test_file_date.py &gt; C:\Users\your_username\Desktop\sandbox\Test_Results\Test_Results.txt
</pre>
<p>This example is referencing an .exe within a hypothetical &quot;sandbox&quot; virtual environment, located on my Desktop. If you have a virtualenv or venv, check the Scripts folder. (Bin on Linux.)</p>
<p><strong>Breaking this out, there are five .bat files parts:</strong></p>
<pre class="literal-block">
cmd /c &quot;C:\Users\your_username\Desktop\sandbox\Scripts\pytest.exe --capture=sys&quot;
</pre>
<p>Windows' <a class="reference external" href="https://ss64.com/nt/cmd.html">cmd command</a> takes a program, so we're passing pytest. <a class="reference external" href="https://docs.pytest.org/en/latest/capture.html">The --capture=sys argument</a> tells pytest to capture the test results. <strong>Note:</strong> switching cmd /c to cmd /k forces the terminal to stay open when you are testing your bat file. You can double-click your .bat file to test run it.</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<pre class="literal-block">
^
</pre>
<p>circumflex represents a line continuation in Windows batch files for better readability</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<pre class="literal-block">
C:\Users\your_username\Desktop\test_file_date.py
</pre>
<p>Next we're passing our python file as an argument to pytest, testing our file's modified date matches today's date.</p>
<blockquote>
<strong>&gt;</strong></blockquote>
<p>This is a Windows redirect. It redirects the pytest output from sys to a text file, which is the last argument in our .bat file:</p>
<pre class="literal-block">
C:\Users\your_username\Desktop\sandbox\Test_Results\Test_Results.txt
</pre>
<p><strong>Browse to select your .bat file for your Windows Task Scheduler task:</strong></p>
<img alt="bat_task" class="alignnone size-full wp-image-2669" src="https://pythonmarketer.files.wordpress.com/2020/03/bat_task.jpg" style="width: 1032px; height: 590px;" />
<p><strong>Reading the Tests and Triggering Alerts</strong></p>
<p>Passing tests signal your scripts are running successfully. When things don't work, email alerts of the failure help us respond quickly.</p>
<p>Let's set another task scheduler job to run <strong>read_test_results.py,</strong> to run a few minutes after the first job each day. See this <a class="reference external" href="https://lofipython.com/automated-python-with-windows-task-scheduler/">example of running Python with Task Scheduler</a> if you haven't triggered a python script from Task Scheduler before.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
<span class="kn">import</span> <span class="nn">getpass</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="sd">&quot;&quot;&quot;Automate pytest with Windows Task Scheduler. Use Task Scheduler run a batch file.</span>
<span class="sd">The batch file runs pytest and captures our pytest function results to sys.</span>
<span class="sd">If a text file contains a failure or error, write the test contents into a folder.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
    <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;Automated_Testing_Alerts.log&quot;</span><span class="p">,</span>
    <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span>
    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%(asctime)s</span><span class="s2"> - </span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">datefmt</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">-%b-%y %H:%M:%S&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Checking for failed tests...&quot;</span><span class="p">)</span>
<span class="n">directory</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;C:/Users/</span><span class="si">{</span><span class="n">getpass</span><span class="o">.</span><span class="n">getuser</span><span class="p">()</span><span class="si">}</span><span class="s2">/Desktop/test_results/&quot;</span>
<span class="n">test_results</span> <span class="o">=</span> <span class="p">[</span><span class="n">fname</span> <span class="k">for</span> <span class="n">fname</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span> <span class="k">if</span> <span class="s2">&quot;.txt&quot;</span> <span class="ow">in</span> <span class="n">fname</span><span class="p">]</span>
<span class="k">for</span> <span class="n">txt_file</span> <span class="ow">in</span> <span class="n">test_results</span><span class="p">:</span>
    <span class="n">file_path</span> <span class="o">=</span> <span class="n">directory</span> <span class="o">+</span> <span class="n">txt_file</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="k">if</span> <span class="s2">&quot;FAILURES&quot;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
        <span class="n">directory</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;C:/Users/</span><span class="si">{</span><span class="n">getpass</span><span class="o">.</span><span class="n">getuser</span><span class="p">()</span><span class="si">}</span><span class="s2">/Desktop/send_failure_alert/&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">directory</span><span class="si">}{</span><span class="n">txt_file</span><span class="si">}</span><span class="s2">_Failed_Results_</span><span class="si">{</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="si">}</span><span class="s2">.txt&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;w+&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No failed tests found in file:&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">txt_file</span><span class="p">)</span>
</pre></div></td></tr></table></div>
<p><strong>Setting up Email Alert Notifications on a Box Folder</strong></p>
<p>The above script checks the test results and creates a file with any failed tests in a different folder. I <a class="reference external" href="https://support.box.com/hc/en-us/articles/360044194073-Manage-Notifications-for-Enterprise-Users">edited the folder's settings</a> to email me when a new file is added, thanks to Box notifications. We use
<a class="reference external" href="http://www.box.com">Box</a> for secure file sharing at my day current day job.</p>
<p>Alternatively for those without Box, you could use 'ole trusty <a class="reference external" href="https://docs.python.org/3/library/smtplib.html">smtplib</a> to send the failure alerts with python. I chose the easier, ready to go option. Remember, &quot;<a class="reference external" href="https://zen-of-python.info/simple-is-better-than-complex.html">Simple is better than complex</a>.&quot;</p>
<p>Also, the <a class="reference external" href="https://github.com/mhammond/pywin32">pywin32 module</a> has an interface to Outlook that is very handy. For an example of sending a Windows Outlook email, check the very end of <a class="reference external" href="http://lofipython.com/exploring-windows-command-line-tools-batch-file-automation-and-remote-desktop-connection/">this post I wrote on &quot;Scripting Windows Like a Pro&quot;</a>.</p>
<p>We now have email monitoring alerts if our csv file date test fails, thanks to:</p>
<ul class="simple">
<li>Windows Task Scheduler (two tasks running each day in succession)</li>
<li>python/pytest</li>
<li>a Windows .bat file</li>
<li>Box (or smtplib or pywin32) email alerts</li>
</ul>
<p><strong>In Summation</strong></p>
<ol class="arabic simple">
<li>The first task runs a .bat file to run pytest and create a text file with daily automation test results.</li>
<li>The second task runs a python file. Setting in motion:</li>
<li>Checking the test result text files, looking for failed tests</li>
<li>Creating a text file with any failing tests in a Box folder, if found</li>
<li>Then Box emails me if any test fails.</li>
</ol>
<p>This was the first time I successfully deployed a Windows batch file. It took me many tries and googling to properly format of the .bat file. They are worth understanding and seem to open up many possibilities on Windows. In this case it was a &quot;glue&quot; piece that allowed me to accomplish my goal, automated testing and alerts for my python scripts.</p>
<p>What we learn along the way shapes us. Learning to use shell commands with Python scripts extends their abilities to help you get stuff done. I've benefitted from improving both my Windows and Ubuntu shell knowledge, which can sometimes be a handy substitute or complement to python. Now, time to write more tests. Thanks for reading!</p>
<p><strong>See also:</strong></p>
<p><a class="reference external" href="https://pypi.org/project/pytest-csv/">pytest-csv</a>: write test results to a csv with this plugin</p>
<p>Read more about software testing in my post <a class="reference external" href="https://lofipython.com/a-collection-of-software-testing-opinions-for-python-and-beyond/">here</a>.</p>

                <div class="clear"></div>

                <div class="info">
                    <a href="https://lofipython.com/automating-pytest-on-windows-with-a-bat-file-python-task-scheduler-and-box.html">posted at 01:47</a>
                    &nbsp;&middot;&nbsp;<a href="https://lofipython.com/category/automation-programming-software-testing-windows.html" rel="tag">automation, programming, software testing, Windows</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://lofipython.com/tag/coding.html" class="tags">coding</a>
                    &nbsp;<a href="https://lofipython.com/tag/pytest.html" class="tags">pytest</a>
                    &nbsp;<a href="https://lofipython.com/tag/python.html" class="tags">python</a>
                    &nbsp;<a href="https://lofipython.com/tag/software-development.html" class="tags">software development</a>
                </div>
            </article>

                <div class="clear"></div>
                <div class="pages">

                    <a href="https://lofipython.com/index8.html" class="prev_page">&larr;&nbsp;Previous</a>

                    <a href="https://lofipython.com/index10.html" class="next_page">Next&nbsp;&rarr;</a>

                    <span>Page 9 of 13</span>
                </div>

            <div class="clear"></div>
            <footer>
                <p>
                <a href="https://github.com/tcarwash/blue-penguin-dark">Blue Penguin Dark</a> Theme
                &middot;
                Powered by <a href="http://getpelican.com">Pelican</a>
                &middot;
                <a href="https://lofipython.com/feeds/all.atom.xml" rel="alternate">Atom Feed</a>
                &middot;
                <a href="https://lofipython.com/feeds/all.rss.xml" rel="alternate">Rss Feed</a>
            </footer>
        </div>
        <div class="clear"></div>
    </div>
</body>
</html>