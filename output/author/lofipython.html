<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lo-Fi Python | Articles by lofipython</title>
    <link rel="shortcut icon" type="image/png" href="https://lofipython.com/favicon.png">
    <link rel="shortcut icon" type="image/x-icon" href="https://lofipython.com/favicon.ico">
    <link href="https://lofipython.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Lo-Fi Python Full Atom Feed" />
    <link href="https://lofipython.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Lo-Fi Python Full RSS Feed" />
    <link rel="stylesheet" href="https://lofipython.com/theme/css/main.css" type="text/css" />
    <link rel="stylesheet" href="https://lofipython.com/theme/css/pygments.css" type="text/css" />
    <meta name="generator" content="Pelican" />
    <meta name="description" content="" />
    <meta name="author" content="@erickbytes" />
</head>
<body>
    <header>
        <nav style="overflow: hidden;">
            <ul>

                <li class="ephemeral selected"><a href="https://lofipython.com/author/lofipython.html">lofipython</a></li>
                <li><a href="https://lofipython.com/">Home</a></li>
                <li><a href="feeds/all.rss.xml">RSS</a></li>
                <li><a href="feeds/all.atom.xml">Atom</a></li>
                <li><a href="https://lofipython.com/contact">Collaborate</a></li>
            </ul>
        </nav>
        <div class="header_box" style="height: 50px">
        <h1><a href="https://lofipython.com/">
            <image src='images/python-powered-h-140x182.png' class="avatar" width="50px" /><span class="site_title">Lo-Fi Python</span>
            </a></h1></div>
        </div>
    </header>
    <div id="wrapper">
        <div id="content">            <h4 class="date">Sep 07, 2024</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://lofipython.com/should-you-block-llms-and-bots-from-your-blog.html" rel="bookmark" title="Permanent Link to &quot;Should You Block LLMs and Bots From Your Blog?&quot;">Should You Block LLMs and Bots From Your Blog?</a>
                </h2>

                
                

                <p><strong>Bots and robots.txt</strong></p>
<p>Bots are crawling the internet. They make up a large chunk of all web traffic.
On my blogs, I've always used the robots.txt to say to bots, &quot;scrape away!&quot; like this:</p>
<pre class="literal-block">
User-agent: *
Disallow:
</pre>
<p>Some websites use a robots.txt to say, &quot;don't scrape our content&quot;.
We can ask crawlers to restrict from crawling, but this is more or less an honor system.
For this blog, I always welcomed all real traffic but activated Cloudflare's &quot;Bot Fight Mode&quot; to
to protect against some of the bots.</p>
<p><strong>Cloudflare Rolls Out New AI Blocker Configuration</strong></p>
<p>I noticed in my Cloudflare Pages dashboard that a new setting has become available to me on the free plan.</p>
<img alt="toggle cloudflare AI bot blocker" src="https://lofipython.com/images/cloudflare-LLM-blocker.png" />
<center><em>Block AI Bots Configuration on Cloudflare Pages</em></center><p>This new configuration option gives another level of security if I want to use it.
For now, I'm choosing to keep my blogs open to most traffic, including AIs while excluding some bots.
Anyone who publishes to the internet needs to assess their willingness to trust big tech's bots to scrape their data.</p>
<blockquote>
<p>You can block artificial intelligence (AI) bots, crawlers, and scrapers from scraping
your website content and training large language models (LLM) to recreate it without
your permission. When you enable this feature via a pre-configured managed rule,
Cloudflare can detect and block AI bots from your website.</p>
<p>- <a class="reference external" href="https://developers.cloudflare.com/bots/concepts/bot/#ai-bots">AI Bots</a></p>
</blockquote>
<p>If an LLM is just a remix of all the data it consumes, how do we trace the origin of its results?
And how does that get attributed back? It seemed easier to tell with Google's link based search results.
But even then, there was a lack of transparency. It's still that way today. I appreciate that Cloudflare is putting
this choice to block or not block AIs in the hands of website makers.</p>
<img alt="most frequently crawling search engines" src="https://lofipython.com/images/top-blog-crawlers.png" style="width: 400px;" />
<center><em>Crawler Traffic on lofipython.com, Aug. - Sept. 2024</em></center><p>The point of this post is to reflect on the nuances of web creators and their relationship with big tech.
Everyone will have to decide for themselves if they think it's worth it. In this case, we're likely &quot;paid in exposure&quot;.
Big tech will distill the value of what we write to inquiring humans and reference back with links. Will website creators
lose out on this exchange? Are we cutting off a channel of distribution if we push back against LLMs scooping up our data?
Right now there seems to be more questions than answers. We'll see.</p>

                <div class="clear"></div>

                <div class="info">
                    <a href="https://lofipython.com/should-you-block-llms-and-bots-from-your-blog.html">posted at 14:42</a>
                    &nbsp;&middot;&nbsp;<a href="https://lofipython.com/category/bots-blogging-internet.html" rel="tag">bots, blogging, internet</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://lofipython.com/tag/robotstxt-policy.html" class="tags">robots.txt policy</a>
                    &nbsp;<a href="https://lofipython.com/tag/llms.html" class="tags">LLMs</a>
                    &nbsp;<a href="https://lofipython.com/tag/internet-ethics.html" class="tags">internet ethics</a>
                </div>
            </article>            <h4 class="date">Aug 29, 2024</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://lofipython.com/launching-a-web-browser-from-ubuntu-shell.html" rel="bookmark" title="Permanent Link to &quot;Launching A Web Browser From Ubuntu Shell&quot;">Launching A Web Browser From Ubuntu Shell</a>
                </h2>

                
                

                <p>Ubuntu allows aliasing commands to run a shell function. Below, I used
<a class="reference external" href="https://linux.die.net/man/1/xdg-open">xdg-open</a> to open my Cloudflare Pages
dashboard with an alias.</p>
<p><strong>Add Ubuntu Function to .bashrc</strong></p>
<p>I used VS Code to add this to my .bashrc file. Now, when I type <strong>cloudflare</strong>
into my shell it launches the dashboard in Chrome. Remember to close and reopen
a new shell before testing out the command.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><span class="go">open_cloudflare() {</span>
<span class="go">    xdg-open &quot;https://dash.cloudflare.com&quot;</span>
<span class="go">}</span>
<span class="go">alias cloudflare=open_cloudflare</span>
</pre></div></td></tr></table></div>
<p>The pattern of being able to open a page in a web browser with a quick command could
be applied to lots of my frequently visited websites.</p>
<p><strong>Bonus Alternate Version: Python webbrowser Module CLI</strong></p>
<p>Sometimes the right tool is Python. Other times, the Linux shell CLI tools are sufficient.
Since this is a Python blog... here is a version that leverages the
Python <a class="reference external" href="https://docs.python.org/3/library/webbrowser.html">webbrowser</a> module CLI that
also works, assuming you're already in your Python environment.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><span class="go">open_cloudflare() {</span>
<span class="go">    python -m webbrowser https://dash.cloudflare.com</span>
<span class="go">}</span>
<span class="go">alias cloudflare=open_cloudflare</span>
</pre></div></td></tr></table></div>

                <div class="clear"></div>

                <div class="info">
                    <a href="https://lofipython.com/launching-a-web-browser-from-ubuntu-shell.html">posted at 12:45</a>
                    &nbsp;&middot;&nbsp;<a href="https://lofipython.com/category/coding-programming-ubuntu-web-browser.html" rel="tag">coding, programming, ubuntu, web browser</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://lofipython.com/tag/alias-web-browser-from-ubuntu.html" class="tags">alias web browser from ubuntu</a>
                    &nbsp;<a href="https://lofipython.com/tag/xdg-open-browser-in-shell.html" class="tags">xdg-open browser in shell</a>
                    &nbsp;<a href="https://lofipython.com/tag/ubuntu-alias.html" class="tags">ubuntu alias</a>
                </div>
            </article>            <h4 class="date">Aug 12, 2024</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://lofipython.com/copying-a-cell-value-to-a-new-google-sheet-with-apps-script.html" rel="bookmark" title="Permanent Link to &quot;Copying a Cell Value to a New Google Sheet With Apps Script&quot;">Copying a Cell Value to a New Google Sheet With Apps Script</a>
                </h2>

                
                

                <p>I've been messing around with <a class="reference external" href="https://www.google.com/script/start/">Apps Script</a> lately
and am finding it useful. The below Apps Script was created with a few prompts to Bing Copilot. First, I asked Bing:</p>
<blockquote>
Write a Google sheets formula that copies the value in cell B10 to another sheet and also fills another column with today's date</blockquote>
<p>...and a later prompt:</p>
<blockquote>
how can i make this script add a new row each time in the target sheet and appending to existing rows?</blockquote>
<p>I refined with some followup prompts to write a script. It copies cell B10's value
from a sheet then fills in a row in a different sheet with cell B10's value and today's date.</p>
<p>AI allows me to do things that would have taken more time to figure out before. For example,
Bing just tapped the <a class="reference external" href="https://developers.google.com/apps-script/reference/spreadsheet/sheet#appendRow(Object)">appendRow</a>
function to handle the updating of values without overwriting existing data. We don't need to know the specific
Apps Script functions to write code in a new language anymore. AI can just fill in those details for us.</p>
<p><strong>Apps Script to Copy a Cell Value and Create New Row with Today's Date</strong></p>
<p>In this example, one sheet is named &quot;Summary&quot; and the other target sheet is named &quot;Daily&quot;
with 2 column names.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">copyTotalValue</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">ss</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">SpreadsheetApp</span><span class="p">.</span><span class="nx">getActiveSpreadsheet</span><span class="p">();</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">sourceSheet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ss</span><span class="p">.</span><span class="nx">getSheetByName</span><span class="p">(</span><span class="s2">&quot;Summary&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">targetSheet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ss</span><span class="p">.</span><span class="nx">getSheetByName</span><span class="p">(</span><span class="s2">&quot;Daily&quot;</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Get the value from B10 in Summary</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">sourceSheet</span><span class="p">.</span><span class="nx">getRange</span><span class="p">(</span><span class="s2">&quot;B10&quot;</span><span class="p">).</span><span class="nx">getValue</span><span class="p">();</span>

<span class="w">  </span><span class="c1">// Get today&#39;s date</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">today</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">();</span>

<span class="w">  </span><span class="c1">// Append a new row to the Daily sheet with the value and today&#39;s date</span>
<span class="w">  </span><span class="nx">targetSheet</span><span class="p">.</span><span class="nx">appendRow</span><span class="p">([</span><span class="nx">value</span><span class="p">,</span><span class="w"> </span><span class="nx">today</span><span class="p">]);</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>
<p>According to Bing, Apps Script is a JavaScript dialect:</p>
<blockquote>
Google Apps Script is based on JavaScript. It uses a subset of JavaScript and provides additional built-in functions...</blockquote>
<p><strong>Automate The Script From the Apps Script Jobs Dashboard</strong></p>
<p>Go to the Apps Script Jobs dashboard.</p>
<img alt="Jobs extensions menu to find Apps Script dashboard" src="https://lofipython.com/images/how-to-find-apps-script-jobs.png" />
<p>Add a new script to run Apps Script.</p>
<img alt="create new apps script code" src="https://lofipython.com/images/create-new-apps-script-job.png" />
<p>Click the blue &quot;Add Trigger&quot; button to create a new job.</p>
<img alt="Apps Script Jobs Triggers Dashboard" src="https://lofipython.com/images/apps-script-jobs.png" />
<p><strong>Supplementary Reading</strong></p>
<p><a class="reference external" href="https://developers.google.com/apps-script/reference">Apps Script Reference Overview</a></p>
<p><a class="reference external" href="https://developers.google.com/apps-script/api/conceptss">Apps Script API</a></p>
<p><a class="reference external" href="https://developers.google.com/apps-script/reference/spreadsheet">Apps Script Spreadsheet Service</a></p>

                <div class="clear"></div>

                <div class="info">
                    <a href="https://lofipython.com/copying-a-cell-value-to-a-new-google-sheet-with-apps-script.html">posted at 17:00</a>
                    &nbsp;&middot;&nbsp;<a href="https://lofipython.com/category/coding-programming-apps-script-google-sheets.html" rel="tag">coding, programming, apps script, google sheets</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://lofipython.com/tag/automating-google-sheets-job.html" class="tags">automating google sheets job</a>
                    &nbsp;<a href="https://lofipython.com/tag/google-sheets-auto-update.html" class="tags">google sheets auto-update</a>
                    &nbsp;<a href="https://lofipython.com/tag/create-new-row-in-google-sheets-apps-script.html" class="tags">create new row in google sheets apps script</a>
                </div>
            </article>            <h4 class="date">Jul 25, 2024</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://lofipython.com/import-analyze-data-with-google-sheets-functions.html" rel="bookmark" title="Permanent Link to &quot;Importing and Analyzing Data With Google Sheets Functions&quot;">Importing and Analyzing Data With Google Sheets Functions</a>
                </h2>

                
                

                <p>This post focuses on Google Sheets formulas, rather than Python. If you're interested in accessing Google Sheets with Python,
check out this <a class="reference external" href="https://lofipython.com/copying-a-csv-file-to-google-sheets-with-pygsheets">post I wrote about the pygsheets library</a>. I haven't personally tried it, but
<a class="reference external" href="https://www.xlwings.org/blog/python-for-google-sheets">xlwings</a> also looks like a decent option if you're looking for Google Sheets Python libraries.</p>
<p>Here are some functions I recently discovered to analyze data in Sheets. There a few different strategies you can use to import data into Google Sheets with the functions available.
Below, you'll see some different approaches you use to get data into Google Sheets and then analyze it. The Google Sheets formulas rabbit hole is deep.
Lots of power can be harnessed by getting familiar with the formulas it has built-in.</p>
<p><strong>Year To Date SPARKLINE of a Stock</strong></p>
<pre class="literal-block">
=SPARKLINE(GOOGLEFINANCE(&quot;Nasdaq:NVDA&quot;, &quot;price&quot;, DATE(YEAR(TODAY()), 1, 1), TODAY(), &quot;daily&quot;), {&quot;charttype&quot;, &quot;line&quot;; &quot;linewidth&quot;, 2; &quot;color&quot;, &quot;green&quot;})
</pre>
<p><strong>Year to Date SPARKLINE of USD to MXN Currency Value with GOOGLEFINANCE + SPARKLINE USING IF to Dynamically Color the SPARKLINE</strong></p>
<pre class="literal-block">
=SPARKLINE(GOOGLEFINANCE(&quot;CURRENCY:USDMXN&quot;, &quot;price&quot;, TODAY()-365, TODAY(), &quot;DAILY&quot;), {&quot;charttype&quot;, &quot;line&quot;; &quot;linewidth&quot;, 2; &quot;color&quot;, if(P22&gt;0,&quot;green&quot;,&quot;red&quot;)})
</pre>
<p>Note the use of an if condition to check another cell and set the color to green if &gt; 0 or red if &lt; 0.</p>
<img alt="Applying Google Sheets Sparklines" src="https://lofipython.com/images/sparkline-example.png" />
<p><strong>Market Cap with GOOOGLEFINANCE</strong></p>
<pre class="literal-block">
=GOOGLEFINANCE(&quot;Nasdaq:NVDA&quot;, &quot;marketcap&quot;)
</pre>
<p><strong>Price/Earnings Ratio</strong></p>
<pre class="literal-block">
=GOOGLEFINANCE(&quot;Nasdaq:MSFT&quot;, &quot;pe&quot;)
</pre>
<p><strong>Daily % Change of a Stock</strong></p>
<pre class="literal-block">
=GOOGLEFINANCE(&quot;Nasdaq:TSLA&quot;,&quot;changepct&quot;) &amp;&quot;%&quot;
</pre>
<p><strong>Import the Price of a Cryptocurrency with IMPORTDATA</strong></p>
<pre class="literal-block">
=IMPORTDATA(&quot;https://cryptoprices.cc/ADA&quot;)
</pre>
<p>This function imports the price of Cardano cryptocurrency from cryptoprices.cc.</p>
<p><strong>Import the Market Cap of a Cryptocurrency with IMPORTDATA</strong></p>
<pre class="literal-block">
=IMPORTDATA(&quot;https://cryptoprices.cc/ADA/MCAP&quot;)
</pre>
<p>This function imports the current market cap of Cardano cryptocurrency.</p>
<p><strong>Import the Daily % Change of Ethereum Cryptocurrency with IMPORTXML and INDEX</strong></p>
<pre class="literal-block">
=IF(
INDEX(IMPORTXML(&quot;https://coinmarketcap.com/currencies/ethereum/&quot;, &quot;//div[contains(&#64;class, 'sc-4c05d6ef-0 sc-58c82cf9-0 dlQYLv dTczEt')]/p/&#64;data-change&quot;), 1) = &quot;down&quot;,
&quot;-&quot; &amp; VALUE(SUBSTITUTE(IMPORTXML(&quot;https://coinmarketcap.com/currencies/ethereum/&quot;, &quot;//div[contains(&#64;class, 'sc-65e7f566-0 gCtSWR')]&quot;), &quot;(1d)&quot;, &quot;&quot;))*100&amp;&quot;%&quot;,
VALUE(SUBSTITUTE(IMPORTXML(&quot;https://coinmarketcap.com/currencies/ethereum/&quot;, &quot;//div[contains(&#64;class, 'sc-65e7f566-0 gCtSWR')]&quot;), &quot;(1d)&quot;, &quot;&quot;))*100&amp;&quot;%&quot;
)
</pre>
<p>This method uses IMPORTXML to import data to google sheets by passing an &quot;xpath query&quot;. The first line checks if the direction of the % change is &quot;down&quot;. If it is down,
then we know the % change is negative, otherwise the % change is positive. In this case I inspected the source code of coinmarketcap to reference the class names of the HTML I was targeting.</p>
<p><strong>Conditionally sum a range with SUMIFS, SUMIF and COUNTIF</strong></p>
<pre class="literal-block">
=SUMIFS('sheet_name'!G:G, 'sheet_name'!N:N, &quot;&gt;0&quot;)
</pre>
<p>In the following examples, &quot;sheet_name&quot; = Your Google sheet's name. This function sums the corresponding cells in column N if column G contains a number greater than 0.</p>
<pre class="literal-block">
=SUMIF('sheet_name'!N:N, &quot;Some Value&quot;,'sheet_name'!G:G)
</pre>
<p>This function sums all values in column G if the values in column N are equal to &quot;Some Value&quot;.</p>
<pre class="literal-block">
=COUNTIF('sheet_name'!A:A, &quot;Some Value&quot;)
</pre>
<p>Count all the cells in column A that equal &quot;Some Value&quot;.</p>
<p><strong>Select Columns from a Dataset</strong></p>
<pre class="literal-block">
{ 'sheet_name'!A:D, 'sheet_name'!T:X, 'sheet_name'!Z:AA}
</pre>
<p>Google sheets recognizes this format of bracket enclosed ranges of columns to select into your dataset. In the next example, you can see this applied.</p>
<p><strong>Conditionally Select a Range of Cells from a Dataset with SORTN, FILTER, and REGEXMATCH</strong></p>
<pre class="literal-block">
=SORTN(FILTER({'sheet_name'!A:A, 'sheet_name'!E:E, 'sheet_name'!P:P/1,'sheet_name'!F:F}, REGEXMATCH('sheet_name'!P:P, &quot;-&quot;)), 5, 0, 3, TRUE)
</pre>
<p>This formula constructs a dataset, then filters it on a condition using REGEXMATCH to check if the cell contains a hyphen (-).
5 specifies how many rows to return, and 3 specifies which column to sort on, in this case the 3rd column.</p>
<p><strong>Conditionally Select a Range of Cells from a Dataset with SORTN and QUERY with SQL-Like Language</strong></p>
<pre class="literal-block">
=SORTN(QUERY({'sheet_name'!A:A, 'sheet_name'!E:E, 'sheet_name'!P:P,'sheet_name'!F:F}, &quot;SELECT * WHERE Col3 IS NOT NULL&quot;), 6, 0, 3, FALSE)
</pre>
<p>This queries rows that are not null, containing data.</p>
<p><strong>Official Function Documentation</strong></p>
<p><a class="reference external" href="https://support.google.com/docs/table/25273?hl=en&amp;ref_topic=9054531&amp;sjid=14386119101264594616-NC#">Google Sheets Function List</a></p>
<p><a class="reference external" href="https://support.google.com/docs/answer/3093281?sjid=14386119101264594616-NCl">GOOGLEFINANCE</a></p>
<p><a class="reference external" href="https://support.google.com/docs/answer/3093335?hl=en">IMPORTDATA</a></p>
<p><a class="reference external" href="https://support.google.com/docs/answer/3093342?hl=en&amp;ref_topic=9199554&amp;sjid=14386119101264594616-NC">IMPORTXML</a></p>
<p><a class="reference external" href="https://support.google.com/docs/answer/3093289?sjid=14386119101264594616-NC">SPARKLINE</a></p>
<p><a class="reference external" href="https://support.google.com/docs/answer/3093197?sjid=14386119101264594616-NC">FILTER</a></p>
<p><a class="reference external" href="https://support.google.com/docs/answer/3238496?sjid=14386119101264594616-NC">SUMIFS</a></p>
<p><a class="reference external" href="https://support.google.com/docs/answer/3093343?hl=en">QUERY</a></p>
<p><a class="reference external" href="https://support.google.com/docs/answer/7354624?sjid=14386119101264594616-NC">SORTN</a></p>
<p><a class="reference external" href="https://support.google.com/docs/answer/3098242?sjid=14386119101264594616-NC">INDEX</a></p>
<p><a class="reference external" href="https://support.google.com/docs/answer/3098292?sjid=14386119101264594616-NC">REGEXMATCH</a></p>

                <div class="clear"></div>

                <div class="info">
                    <a href="https://lofipython.com/import-analyze-data-with-google-sheets-functions.html">posted at 16:00</a>
                    &nbsp;&middot;&nbsp;<a href="https://lofipython.com/category/spreadsheets-data-analysis-google-sheets.html" rel="tag">spreadsheets, data analysis, google sheets</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://lofipython.com/tag/google-sheets.html" class="tags">google sheets</a>
                    &nbsp;<a href="https://lofipython.com/tag/data-wrangling.html" class="tags">data wrangling</a>
                    &nbsp;<a href="https://lofipython.com/tag/speadsheet-data-import.html" class="tags">speadsheet data import</a>
                </div>
            </article>            <h4 class="date">Jun 25, 2024</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://lofipython.com/background-noise-in-real-life.html" rel="bookmark" title="Permanent Link to &quot;There is Background Noise in Real Life&quot;">There is Background Noise in Real Life</a>
                </h2>

                
                

                <p>While walking down a busy avenue in Mexico, I listened to a conversation in Spanish. I'm not fluent in Spanish,
but I have 4 years of high school classes and ~2 more years of real world experience. Spanish is not spoke in a bubble.
It needs to be practiced to be learned. I put much effort into listening. There is much more I have to learn. Typically,
I try to compensate for some lack of skills with intense focus. Sometimes I know what is said and more often
I am closer to guessing.</p>
<p>On this walk down the street, I attempted to listen to my friends speak. In the back of my mind, I was frustrated
because the noise of the cars going past us and a city in motion made it near impossible to hear the words. Similarly, attempting
to listen in a bar, party or anywhere playing music is very tough.</p>
<p>I used to think, &quot;if only it was more quiet!&quot; while walking and straining to hear what my friends said over the noise.
Today I had an epiphany: there's always background noise.</p>
<blockquote>
A difference between textbooks and real life: there's usually noise in the background.</blockquote>
<p>We should embrace practicing and growing our skills because there will always be &quot;noise&quot;.
This is a tidy metaphor for distraction and our focus bandwidth. In the lens of coding, the &quot;noise&quot; might be
skill deficiencies and lack of understanding, other co-workers, unimportant projects, meetings, social media, games
and anything that misdirects us away from our primary goals.</p>
<p>It's easy to get annoyed when there is excessive noise. It makes it way harder to hear what is being said.
Nonetheless, I don't have to let the noise distract my effort and intention to learn. So it is with programming and all skills.
There will always be &quot;noise&quot;. Embrace the noise and lean heavily on your intention to practice.</p>
<img alt="a cat blocking out the background noise to learn" src="https://lofipython.com/images/study-cat.jpeg" />
<p><em>Image Generated with Bing Image Creator</em></p>

                <div class="clear"></div>

                <div class="info">
                    <a href="https://lofipython.com/background-noise-in-real-life.html">posted at 17:28</a>
                    &nbsp;&middot;&nbsp;<a href="https://lofipython.com/category/learning-productivity-spanish.html" rel="tag">learning, productivity, Spanish</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://lofipython.com/tag/learning-philosophy.html" class="tags">learning philosophy</a>
                    &nbsp;<a href="https://lofipython.com/tag/focus.html" class="tags">focus</a>
                    &nbsp;<a href="https://lofipython.com/tag/achievement.html" class="tags">achievement</a>
                </div>
            </article>            <h4 class="date">May 01, 2024</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://lofipython.com/how-to-share-a-google-calendar-event-url.html" rel="bookmark" title="Permanent Link to &quot;How to Share a Google Calendar Event URL&quot;">How to Share a Google Calendar Event URL</a>
                </h2>

                
                

                <p>You can easily share a Google Calendar event if you know the url syntax Google uses.
When the url is opened in a browser, it prompts the person you want to share an event
with to save it to their calendar.</p>
<p><strong>Demonstrating Google Calendar URL Arguments in Python</strong></p>
<p>By simply knowing the proper url arguments, you can enable people to quickly save a Google Calendar event.
This example uses the Python standard library: urllib to format the Google calendar url parameters and webbrowser
to open the url in a browser. This is a handy little trick to keep in your back pocket!</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">urlencode</span>
<span class="kn">import</span> <span class="nn">webbrowser</span>

<span class="k">def</span> <span class="nf">new_google_calendar_event</span><span class="p">():</span>
<span class="w">   </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">   Pass an event to Google Calendar with url arguments.</span>

<span class="sd">   Base URL: https://calendar.google.com/calendar/render</span>

<span class="sd">   URL Arguments:</span>

<span class="sd">   action: TEMPLATE</span>
<span class="sd">   text: Event Title</span>
<span class="sd">   dates: start_datetime/end_datetime</span>
<span class="sd">   details: event description or link to more info</span>
<span class="sd">   location: url to webcast, call or physical location name</span>
<span class="sd">   ctz: set the time zone by name, ex: America/New_York</span>
<span class="sd">   recur: set a recurring event, ex: RRULE:FREQ%3DWEEKLY;INTERVAL%3D3</span>
<span class="sd">   crm: if Free, Busy, or Out of Office, ex: AVAILABLE, BUSY or BLOCKING</span>
<span class="sd">   add: add a list of guests by email, ex: elf1@example.com,elf2@example.com</span>
<span class="sd">   &quot;&quot;&quot;</span>
   <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;TEMPLATE&quot;</span><span class="p">,</span>
      <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Title of Event&quot;</span><span class="p">,</span>
      <span class="s2">&quot;dates&quot;</span><span class="p">:</span> <span class="s2">&quot;20240504T123000Z/20240504T133000Z&quot;</span><span class="p">,</span>
      <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="s2">&quot;Event Details: https://lofipython.com&quot;</span><span class="p">,</span>
      <span class="s2">&quot;location&quot;</span><span class="p">:</span> <span class="s2">&quot;link to webcast, call or physical location&quot;</span><span class="p">,</span>
      <span class="s2">&quot;ctz&quot;</span><span class="p">:</span> <span class="s2">&quot;America/Chicago&quot;</span><span class="p">,</span>
      <span class="s2">&quot;crm&quot;</span><span class="p">:</span> <span class="s2">&quot;BUSY&quot;</span>
   <span class="p">}</span>
   <span class="c1"># Returns str of URL encoded parameters.</span>
   <span class="n">url_parameters</span> <span class="o">=</span> <span class="n">urlencode</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
   <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://calendar.google.com/calendar/render?</span><span class="si">{</span><span class="n">url_parameters</span><span class="si">}</span><span class="s2">&quot;</span>
   <span class="nb">print</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
   <span class="k">return</span> <span class="n">url</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">new_google_calendar_event</span><span class="p">()</span>
<span class="n">webbrowser</span><span class="o">.</span><span class="n">open_new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</pre></div></td></tr></table></div>
<img alt="share a google calendar event via a url" src="https://lofipython.com/images/google-calendar-event-example.png" />
<p>I was struggling to find any official documentation, so I figured Google's <a class="reference external" href="https://gemini.google.com/">Gemini AI model</a> might know where this is documented.</p>
<img alt="share a google calendar event via a url" src="https://lofipython.com/images/gemini-google-calendar-convo.png" />
<p>Using the app on my phone, Gemini informed me of a <a class="reference external" href="https://support.google.com/calendar/thread/128416249?authuser=0&amp;hl=en&amp;msgid=129231290">useful Google Calendar Help thread response from Neil&#64;GCalTools</a>.</p>
<blockquote>
<dl class="docutils">
<dt>The official documentation says to use &quot;<a class="reference external" href="https://calendar.google.com/calendar/render">https://calendar.google.com/calendar/render</a>&quot; instead of &quot;<a class="reference external" href="https://calendar.google.com/calendar/event">https://calendar.google.com/calendar/event</a>&quot;, but they both work, at least for now.</dt>
<dd>- Neil&#64;GCalTools, Google Calendar Help</dd>
</dl>
</blockquote>
<p><strong>Relevant Links</strong></p>
<p>Read more documentation of possible url arguments in the <a class="reference external" href="https://github.com/InteractionDesignFoundation/add-event-to-calendar-docs/blob/main/services/google.md">add-event-to-calendar-docs Github repo</a>.</p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">Wikipedia Time Zone List</a></p>
<p><a class="reference external" href="https://icalendar.org/iCalendar-RFC-5545/3-8-5-3-recurrence-rule.html">Recurrence Rule Syntax</a></p>
<p><a class="reference external" href="https://kalinka.tardate.com/">Kalinka Google Calendar Link Generator</a></p>

                <div class="clear"></div>

                <div class="info">
                    <a href="https://lofipython.com/how-to-share-a-google-calendar-event-url.html">posted at 16:14</a>
                    &nbsp;&middot;&nbsp;<a href="https://lofipython.com/category/coding-programming-python-urls-automation.html" rel="tag">coding, programming, python, urls, automation</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://lofipython.com/tag/google-calendar-url-api-example.html" class="tags">Google Calendar URL API example</a>
                    &nbsp;<a href="https://lofipython.com/tag/sharing-a-google-calendar-event.html" class="tags">sharing a Google Calendar event</a>
                    &nbsp;<a href="https://lofipython.com/tag/create-google-calendar-event-with-python.html" class="tags">create google calendar event with python</a>
                </div>
            </article>            <h4 class="date">Apr 07, 2024</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://lofipython.com/troubleshooting-tracebacks-to-resurrect-a-web2py-app.html" rel="bookmark" title="Permanent Link to &quot;Troubleshooting Tracebacks to Resurrect a Python Web2py App&quot;">Troubleshooting Tracebacks to Resurrect a Python Web2py App</a>
                </h2>

                
                

                <p>Back in 2016, I <a class="reference external" href="https://lofipython.com/askkevinparker-com-my-first-web-app-other-notes">built a web2py app</a>
as my first web application. It accepts a prompt from the user and
primitively attempts to match that text to a line of Kevin Parker's lyrics written for the band Tame Impala.</p>
<p>I didn't look at the app's code for many years. I just needed to log into <a class="reference external" href="https://pythonanywhere.com">PythonAnywhere</a>
every 3 months and hit a button to keep it running on their free plan. Until I decided to update it recently.</p>
<p>Tame Impala released a new album and lots of additional tracks to import to the app.
Just need to update the database with new music. No big deal, right?</p>
<p>Part of the problem with updating the app was that I didn't remember where the important code
like the controller default.py and relevant HTML files were after not seeing it for 5+ years.
It took some time to remember the folder structure of a web2py project. Since it was my first
project ever, documentation was nonexistent. I could have saved myself a lot of grief if I'd wrote
down some notes when I made the app.</p>
<p>web2py is relatively easy to grasp for Python developers. One thing I like is that
once it is installed, the development server is easily started by running the web2py.py file:</p>
<pre class="code console literal-block">
<span class="go">cd web2py
python3.10 web2py.py</span>
</pre>
<p><strong>web2py Python Errors Solved</strong></p>
<p>I installed web2py locally with the help of a <a class="reference external" href="https://www.digitalocean.com/community/tutorials/how-to-use-the-web2py-framework-to-quickly-build-your-python-app">DigitalOcean blog post</a>.
After I failed to push a new version of the app to production, for some reasons it was in a broken state.
Python version issues surfaced, requiring some heady navigation. Enjoy these gritty details
of the tracebacks that transpired.</p>
<hr class="docutils" />
<pre class="code console literal-block">
<span class="go">ModuleNotFoundError: No module named 'formatter'</span>
</pre>
<img alt="formatter module missing in Python WSGI app" src="https://lofipython.com/images/ModuleNotFoundError-no-module-named-formatter.png" />
<p>This error showed up in my app's WSGI error logs. Initially, I researched and attempted to install
the <a class="reference external" href="https://pypi.org/project/formatter/">formatter module</a>. I believe this was caused by attempting
to run Python code compiled to a .w2p file on Python 3.11 on a Python 3.10 interpreter. However, I didn't
know how to solve it until after I saw the next error.</p>
<hr class="docutils" />
<pre class="code console literal-block">
<span class="go">SystemError: compiled code is incompatible</span>
</pre>
<img alt="incompatible python interpreter and compiled python code" src="https://lofipython.com/images/SystemError-compiled-code-is-incompatible-cause.png" />
<p>After reading this error, I consulted Bing about it. One of the options that Bing suggested was
that my Python code had incompatible versions. This was caused by a mismatch between my development
and production Python versions.</p>
<p><strong>Installing Python 3.10 in Development Environment</strong></p>
<p>Originally, I compiled the updated web2py app in Python 3.11 on my Chromebook. My PythonAnywhere environment was
running <a class="reference external" href="https://www.python.org/downloads/release/python-3105/">Python 3.10</a>. Therefore, I need to build the
development code in Python 3.10 to match the production environment on PythonAnywhere.
I entered a handful of commands from Bing Copilot to build Python 3.10 on my Ubuntu development environment:</p>
<pre class="code console literal-block">
<span class="go">sudo apt-get install build-essential
sudo apt-get install zlib1g-dev
sudo apt-get install libsqlite3-dev
wget https://www.python.org/ftp/python/3.10.5/Python-3.10.5.tgz
tar zxvf Python-3.10.5.tgz
cd Python-3.10.5
./configure --enable-optimizations --enable-loadable-sqlite-extensions
make &amp;&amp; sudo make install</span>
</pre>
<p>The lesson I took away is to consider your production environment's Python version before you begin working on a project.
In most cases, you'll want to match that version in your development environment to avoid errors like this.</p>
<p>After compiling the new development Python 3.10 version, I exported the app to a new .w2p file.
Next, I imported the .w2p file containing the updated app to PythonAnywhere in the admin interface app importer.</p>
<p>After syncing my development and production environment versions, the app showed a different error.
Progress!</p>
<p>Since I was using a .w2p file from 5+ years ago, it contained old Python web2py code written in
earlier Python versions with a few more bugs. Despite these version inconveniences, I was happy to see the
&quot;compiled code is incompatible&quot; and &quot;formatter module missing&quot; errors stopped.
One problem solved, two more discovered in its wake, am I right?</p>
<hr class="docutils" />
<pre class="code console literal-block">
<span class="go">SyntaxError: multiple exception types must be parenthesized</span>
</pre>
<img alt="exception types must be parenthesized in Python" src="https://lofipython.com/images/SyntaxError-exception-types-must-be-parenthesized.png" />
<p>This error showed up in my appadmin.py. At some point this unparenthesized syntax was phased out of Python.
The fix is add parentheses to the exception statements:</p>
<p><em>Incorrect</em></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
</pre></div></td></tr></table></div>
<p><em>Correct</em></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">except</span> <span class="p">(</span><span class="ne">Exception</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
</pre></div></td></tr></table></div>
<hr class="docutils" />
<pre class="code console literal-block">
<span class="go">unable to parse csv file: iterator should return strings, not bytes (the file should be opened in text mode)</span>
</pre>
<p>In order to import the new Tame Impala songs to the SQLlite database, web2py provides a
GUI interface in its admin panel or the DAL (Database Abstraction Layer).
I chose to use the GUI. In the GUI, you can either manually enter each song or use its csv import widget.
To save time, I imported via the csv widget. However, this error slowed me down.
It stemmed from the need for TextIOWrapper to convert the csv data to a required format.</p>
<img alt="unable to parse csv error importing to web2py SQLlite" src="https://lofipython.com/images/unable-to-parse-csv-web2py.png" />
<p>The solution I found was to use the
<a class="reference external" href="https://github.com/web2py/web2py/issues/2148#issuecomment-616036400">fix suggested by AnooshaAviligonda</a>.
In web2py/gluon/packages/dal/pydal/objects.py, I swapped in this code:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">csv_reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">TextIOWrapper</span><span class="p">(</span><span class="n">utf8_data</span><span class="p">,</span><span class="n">encoding</span><span class="p">),</span> <span class="n">dialect</span><span class="o">=</span><span class="n">dialect</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div></td></tr></table></div>
<img alt="unable to parse csv Python fix with TextIOWrapper" src="https://lofipython.com/images/unable-to-parse-csv-fix.png" />
<p>After adding the above code to my web2py app's objects.py file, the csv importer completed my
new Tame Impala songs database import. Also, I was able to export an app from my development environment
and deploy it into PythonAnywhere via the admin interface. Mission accomplished.</p>
<p>I imported the new songs to my app and brought the code forward into future Python versions.
Keeping up with this project over the years shows how maintaining an app across different Python versions
can cause unexpected challenges. With these Python tracebacks conquered, the app is back on the web.
Now with all of Tame Impala's new lyrics!</p>
<p><strong>Check out my Tame Impala web2py app here:</strong></p>
<p><a class="reference external" href="http://tameimpala.pythonanywhere.com/tameimpala">tameimpala.pythonanywhere.com/tameimpala</a></p>

                <div class="clear"></div>

                <div class="info">
                    <a href="https://lofipython.com/troubleshooting-tracebacks-to-resurrect-a-web2py-app.html">posted at 20:53</a>
                    &nbsp;&middot;&nbsp;<a href="https://lofipython.com/category/coding-programming-python-web2py-apps.html" rel="tag">coding, programming, python, web2py, apps</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://lofipython.com/tag/troubleshooting-web2py-app.html" class="tags">troubleshooting web2py app</a>
                    &nbsp;<a href="https://lofipython.com/tag/updating-old-python-code.html" class="tags">updating old Python code</a>
                    &nbsp;<a href="https://lofipython.com/tag/maintaining-python-code.html" class="tags">maintaining python code</a>
                </div>
            </article>            <h4 class="date">Mar 31, 2024</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://lofipython.com/how-to-write-a-custom-django-html-filter.html" rel="bookmark" title="Permanent Link to &quot;Run Python in Your HTML Via a Custom Django Template Tags Filter&quot;">Run Python in Your HTML Via a Custom Django Template Tags Filter</a>
                </h2>

                
                

                <p>This post shows how to set up a custom Django template tag filter. With help from Django's load built-in,
you can execute a Python function from your app's HTML. In this example, the function returns the quotient,
or result of dividing two numbers. Mathematics and Python for the win!</p>
<p>I worked some of this out with help from Bing and
following along with the <a class="reference external" href="https://docs.djangoproject.com/en/5.0/howto/custom-template-tags/">Django custom template tags documentation</a>.</p>
<p><strong>Install Django Python Library</strong></p>
<pre class="code console literal-block">
<span class="go">pip install Django</span>
</pre>
<p><strong>Create templatetags.py</strong></p>
<p>I created a &quot;templatetags&quot; folder in the app folder and placed templatetags.py within it.
The Django docs recommend your app's folder. Below, the &#64;register.filter decorator registers the divide function so Django knows it exists.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">template</span>

<span class="n">register</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">Library</span><span class="p">()</span>

<span class="nd">@register</span><span class="o">.</span><span class="n">filter</span>
<span class="k">def</span> <span class="nf">divide</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">divisor</span><span class="p">):</span>
<span class="w">   </span><span class="sd">&quot;&quot;&quot;A Django filter that accepts 2 arguments:</span>
<span class="sd">   1. value, number to be divided</span>
<span class="sd">   2. divisor, number to divide by</span>

<span class="sd">   Returns the quotient in hundredths decimal format.</span>
<span class="sd">   &quot;&quot;&quot;</span>
   <span class="c1"># Check if the argument is zero to avoid division by zero error.</span>
   <span class="k">if</span> <span class="n">divisor</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
      <span class="k">return</span> <span class="kc">None</span>
   <span class="n">quotient</span> <span class="o">=</span> <span class="n">value</span> <span class="o">/</span> <span class="n">divisor</span>
   <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">quotient</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div></td></tr></table></div>
<p><strong>Edit Your HTML Code to Call the Divide Function</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span>{% extends &#39;base.html&#39; %}
{% block content %}
{% load templatetags %}
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;display: inline-block; inline-size: 90%; block-size: auto; writing-mode: horizontal-tb;&quot;</span><span class="p">&gt;</span>
{% for hotel in hotels %}
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;row row-cols-3&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;display: flex; justify-content: flex-end; padding: 10px; margin: 10px; background-color: #f0ffff; box-shadow: 5px 5px 10px gray; border-radius: 10px;&quot;</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col&quot;</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">h5</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;color: green;&quot;</span><span class="p">&gt;</span>Peso: ${{ hotel.price }}<span class="p">&lt;/</span><span class="nt">h5</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">h5</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;color: gray;&quot;</span><span class="p">&gt;</span>USD: ${{ hotel.price|divide:18.9 }}<span class="p">&lt;/</span><span class="nt">h5</span><span class="p">&gt;</span>
   <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
{% endfor %}
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
{% endblock %}
</pre></div></td></tr></table></div>
<p>In the HTML, call the divide function by loading the templatetags module and then passing two numeric arguments:</p>
<pre class="code console literal-block">
<span class="go">{{ hotel.price|divide:18.9 }}</span>
</pre>
<ol class="arabic simple">
<li>A number to be divided, here the hotel price from a &quot;Hotel&quot; DB model</li>
<li>The function name to call and a number to divide by. Here we use &quot;divide:18.9&quot; to approximately convert Mexican pesos to US dollars. Recently, the exchange rate fluctuates in the 17-19 pesos per dollar range.</li>
</ol>
<p><strong>Basic Hotel Model Example</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Hotel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
   <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
   <span class="n">price</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DecimalField</span><span class="p">(</span><span class="n">max_digits</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
   <span class="n">address</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
   <span class="n">city</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
   <span class="n">all_inclusive</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">()</span>
   <span class="n">photo</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ImageField</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="s2">&quot;media&quot;</span><span class="p">)</span>
</pre></div></td></tr></table></div>
<p><strong>Register Model in admin.py</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Hotel</span>

<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Hotel</span><span class="p">)</span>
</pre></div></td></tr></table></div>
<p>I was pleased to be able to make some on the fly mathematic calculations in my HTML
with a custom Django filter!</p>
<img alt="django filter in action example HTML page" src="https://lofipython.com/images/django-filter-successful.png" />

                <div class="clear"></div>

                <div class="info">
                    <a href="https://lofipython.com/how-to-write-a-custom-django-html-filter.html">posted at 16:18</a>
                    &nbsp;&middot;&nbsp;<a href="https://lofipython.com/category/coding-programming-python-django.html" rel="tag">coding, programming, python, Django</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://lofipython.com/tag/django-custom-filter.html" class="tags">django custom filter</a>
                    &nbsp;<a href="https://lofipython.com/tag/dynamic-html-python-django.html" class="tags">dynamic HTML python django</a>
                    &nbsp;<a href="https://lofipython.com/tag/running-python-in-django-html.html" class="tags">running Python in Django HTML</a>
                </div>
            </article>            <h4 class="date">Mar 01, 2024</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://lofipython.com/validating-rst-links-with-rst-url-validator.html" rel="bookmark" title="Permanent Link to &quot;Find Broken Links in Your .rst Documents With rst-url-validator&quot;">Find Broken Links in Your .rst Documents With rst-url-validator</a>
                </h2>

                
                

                <p>The posts on this blog are written in <a class="reference external" href="https://www.writethedocs.org/guide/writing/reStructuredText/">reStructuredText</a>.
I recently had an idea to write a Python script to check my .rst document url links for broken tags or urls that are not valid.
When I'm using <a class="reference external" href="https://pypi.org/project/pelican/">Pelican</a>, it hints when a url tag is malformed and gives a line number.
However, it can still be difficult to track down a problematic link when there's an issue in your document.</p>
<p>So I did what any other programmer probably does in 2024, opened up an AI assistant. Bing quickly generated the structure
of the Python script from my prompt, but like usual it required some tinkering and refinement to make it work.
You can find the complete Python script in the <a class="reference external" href="https://github.com/erickbytes/rst-url-validator">rst-url-validator Github repo</a>.</p>
<p>Bing was also valuable for helping me modify the <a class="reference external" href="https://docs.python.org/3/howto/regex.html">regex module</a> code
for rst-url-validator. It is typically very confusing to reason about regex,
but with AI assistance I can just ask it for regex that does something and
the AI can generate the code. Coding is getting way easier than it used to be thanks
to these new advances in large language models.</p>
<p><strong>Install Python Library Dependencies</strong></p>
<p>The script uses <a class="reference external" href="https://pypi.org/project/requests/">requests</a> to send an HTTP request to the url
and <a class="reference external" href="https://pypi.org/project/rich/">rich</a> to print color-coded output to the terminal screen.</p>
<pre class="code console literal-block">
<span class="go">pip install requests
pip install rich</span>
</pre>
<p><strong>Clone The Github Repo</strong></p>
<pre class="code console literal-block">
<span class="go">git clone git&#64;github.com:erickbytes/rst-url-validator.git
cd rst-url-validator</span>
</pre>
<p><strong>Run The CLI Command</strong></p>
<pre class="code console literal-block">
<span class="go">python rst-url-validator.py your_file.rst</span>
</pre>
<img alt="validate .rst document urls with python" src="https://lofipython.com/images/rst-report.png" />
<p>It parses each url tag, checks for required characters and sends a <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/HEAD">HEAD</a> request
to the url to check if it loads successfully. Some websites return status codes like 403 (permission denied), 301 (redirect), or 404 (page not found).
If the status code returned is 200, it's safe to say the page loaded. Be aware that some sites like Cloudflare (returns 403) and Amazon (returns 503) do not serve
any requests and just return an error. In cases like these, you'll need to check pages like this manually in a browser to see if the page loads.</p>
<p>This script helped me find and fix or remove a bunch of broken links on the older posts on this blog. If you're working with .rst documents, give it a try!</p>

                <div class="clear"></div>

                <div class="info">
                    <a href="https://lofipython.com/validating-rst-links-with-rst-url-validator.html">posted at 12:56</a>
                    &nbsp;&middot;&nbsp;<a href="https://lofipython.com/category/coding-programming-python-writing-rst-restructuredtext.html" rel="tag">coding, programming, python, writing, .rst, reStructuredtext</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://lofipython.com/tag/restructuredtext-format.html" class="tags">reStructuredtext Format</a>
                    &nbsp;<a href="https://lofipython.com/tag/python-rst-url-validation.html" class="tags">python rst url validation</a>
                    &nbsp;<a href="https://lofipython.com/tag/how-to-validate-rst-links.html" class="tags">how to validate .rst links</a>
                </div>
            </article>            <h4 class="date">Feb 22, 2024</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://lofipython.com/fixing-install_image_loader_timed_out-on-crostini-linux-chromebook-terminal.html" rel="bookmark" title="Permanent Link to &quot;Fixing INSTALL_IMAGE_LOADER_TIMED_OUT Error 52 on Crostini Linux Terminal for Chromebook&quot;">Fixing INSTALL_IMAGE_LOADER_TIMED_OUT Error 52 on Crostini Linux Terminal for Chromebook</a>
                </h2>

                
                

                <p>When booting up the Ubuntu shell on my Chromebook, it usually just works. However, After I updated
to a new version of Chromebook OS, I was getting this error:</p>
<blockquote>
<dl class="docutils">
<dt>vmshell failed:</dt>
<dd><dl class="first last docutils">
<dt>Error starting crostini for terminal:</dt>
<dd>52 (INSTALL_IMAGE_LOADER_TIMED_OUT)</dd>
</dl>
</dd>
</dl>
</blockquote>
<p>First, I restarted my Chromebook but the error persisted after restarting. So I turned to Bing Copilot:</p>
<img alt="asking bing how to fix crostini error code 52" src="https://lofipython.com/images/bing-restart-crostini.png" />
<p>source: <a class="reference external" href="bing.com">Bing</a></p>
<p><strong>Open Crosh: ctrl + alt + T</strong></p>
<p><strong>Stop The Termina Container in Crosh</strong></p>
<pre class="code console literal-block">
<span class="go">vmc stop termina</span>
</pre>
<p><strong>Start The Termina Container in Crosh</strong></p>
<pre class="code console literal-block">
<span class="go">vmc start termina</span>
</pre>
<p>The vmc command is used to manage Linux containers from Crosh. After I entered these two vmc commands,
the error was resolved. My Crostini Linux shell is functional again!</p>

                <div class="clear"></div>

                <div class="info">
                    <a href="https://lofipython.com/fixing-install_image_loader_timed_out-on-crostini-linux-chromebook-terminal.html">posted at 13:22</a>
                    &nbsp;&middot;&nbsp;<a href="https://lofipython.com/category/programming-linux-shell.html" rel="tag">programming, linux, shell</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://lofipython.com/tag/troubleshooting-chromebook-crostini-error-52.html" class="tags">troubleshooting chromebook crostini error 52</a>
                    &nbsp;<a href="https://lofipython.com/tag/solving-image-loader-timed-out-error.html" class="tags">solving image loader timed out error</a>
                    &nbsp;<a href="https://lofipython.com/tag/restart-chromebook-linux-container.html" class="tags">restart chromebook linux container</a>
                </div>
            </article>

                <div class="clear"></div>
                <div class="pages">


                    <a href="https://lofipython.com/author/lofipython2.html" class="next_page">Next&nbsp;&rarr;</a>

                    <span>Page 1 of 3</span>
                </div>

            <div class="clear"></div>
            <footer>
                <p>
                <a href="https://github.com/tcarwash/blue-penguin-dark">Blue Penguin Dark</a> Theme
                &middot;
                Powered by <a href="http://getpelican.com">Pelican</a>
                &middot;
                <a href="https://lofipython.com/feeds/all.atom.xml" rel="alternate">Atom Feed</a>
                &middot;
                <a href="https://lofipython.com/feeds/all.rss.xml" rel="alternate">Rss Feed</a>
            </footer>
        </div>
        <div class="clear"></div>
    </div>
</body>
</html>